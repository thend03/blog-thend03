<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>å¦‚ä½•åšä¸€ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª | Fayy&amp;Fc's Blog</title>
<meta name=keywords content="xiaobot,spider,nav"><meta name=description content="ä»0åˆ°1åš1ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª"><meta name=author content="since"><link rel=canonical href=https://blog.thend03.com/posts/how-to-make-a-xiaobot-nav/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://blog.thend03.com/img/logo.jpg><link rel=icon type=image/png sizes=16x16 href=https://blog.thend03.com/img/logo.jpg><link rel=icon type=image/png sizes=32x32 href=https://blog.thend03.com/img/logo.jpg><link rel=apple-touch-icon href=https://blog.thend03.com/img/logo.jpg><link rel=mask-icon href=https://blog.thend03.com/img/logo.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://blog.thend03.com/posts/how-to-make-a-xiaobot-nav/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script src=https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta property="og:title" content="å¦‚ä½•åšä¸€ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª"><meta property="og:description" content="ä»0åˆ°1åš1ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.thend03.com/posts/how-to-make-a-xiaobot-nav/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-21T13:08:59+08:00"><meta property="article:modified_time" content="2024-07-21T13:08:59+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="å¦‚ä½•åšä¸€ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª"><meta name=twitter:description content="ä»0åˆ°1åš1ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ“šæ–‡ç« ","item":"https://blog.thend03.com/posts/"},{"@type":"ListItem","position":2,"name":"å¦‚ä½•åšä¸€ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª","item":"https://blog.thend03.com/posts/how-to-make-a-xiaobot-nav/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"å¦‚ä½•åšä¸€ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª","name":"å¦‚ä½•åšä¸€ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª","description":"ä»0åˆ°1åš1ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª","keywords":["xiaobot","spider","nav"],"articleBody":"å°æŠ¥ç«¥ç²¾é€‰å¯¼èˆªç«™æˆæœå±•ç¤º: https://re.gloaming.top/\n0x0 å¯¼èˆªç«™çš„è¯¦ç»†å®æ“ï¼Œè®²äº†ä¸“æ æ¥æºçš„é€‰æ‹©ï¼Œå¦‚ä½•æ•´ç†è·å–ä¸“æ åˆ—è¡¨è¯¦æƒ…ï¼Œå‰ç«¯æ ·å¼æ€ä¹ˆåšï¼Œå¦‚ä½•éƒ¨ç½²å¹¶ç”Ÿæˆæœ€ç»ˆçš„å¯¼èˆªç«™ç­‰ã€‚\nç”±äºå‰ç«¯èƒ½åŠ›å®åœ¨æœ‰é™ï¼Œæ‰€ä»¥æœ¬ç¯‡æ–‡ç« çš„é‡ç‚¹æ˜¯åœ¨å¦‚ä½•è·å–ç²¾é€‰çš„ä¸“æ åˆ—è¡¨ä¸Šã€‚\nå¯¼èˆªç«™ä½¿ç”¨ä¸€ä¸ªå¼€æºé¡¹ç›®æ”¹é€ è€Œæ¥ã€‚\nå°æŠ¥ç«¥ç®€ä»‹ å°æŠ¥ç«¥æ˜¯ä¸ªå»ä¸­å¿ƒåŒ–çš„è¯¾ç¨‹å¹³å°ã€‚\nåˆ›ä½œè€…å¯ä»¥åœ¨å°æŠ¥ç«¥ä½“é¢è€Œç”¨å¿ƒçš„åˆ›ä½œï¼Œä¸“æ³¨åˆ›ä½œï¼Œä¸æå¥—è·¯ã€‚\nè€Œä¸”ä¸“æ çš„ä»·æ ¼å¤§éƒ¨åˆ†éƒ½æ¯”è¾ƒä¾¿å®œã€‚\nå°æŠ¥ç«¥å®˜æ–¹ä¸åšç¤¾ç¾¤ï¼Œä¸åšå¹¿å‘Šå˜ç°ï¼Œä¸åšç®—æ³•æ¨èã€‚\nå› ä¸ºå°æŠ¥ç«¥æ˜¯å»ä¸­å¿ƒåŒ–çš„ï¼Œæ‰€ä»¥å®˜ç½‘æ²¡æœ‰æ‰€æœ‰çš„ä¸“æ åˆ—è¡¨ï¼Œåªèƒ½é€šè¿‡ä¸“æ ä½œè€…è‡ªå‘æ€§çš„ä¼ æ’­ï¼Œæˆ–è€…å°æŠ¥ç«¥å®˜æ–¹çš„æ¨èæ‰èƒ½æ‰¾åˆ°ä¸“æ åœ°å€ã€‚\næ‰€ä»¥æœ‰äººå°±åšäº†å°æŠ¥ç«¥çš„å¯¼èˆªç«™ï¼Œç”¨æ¥æ¨èä¸“æ ã€‚\nè€Œä¸”å°æŠ¥ç«¥è¿™ä¸ªä¸éœ€è¦ä¹°ä¸“æ ï¼Œå°±å¯ä»¥è·å¾—åˆ†é”€é“¾æ¥ã€‚æ‰€ä»¥ç†è®ºä¸Šå°æŠ¥ç«¥çš„æ‰€æœ‰ä¸“æ éƒ½å¯ä»¥å…è´¹è·å¾—åˆ†é”€é“¾æ¥ã€‚\nå¦å¤–å¤§å£°çš„åæ§½ä¸€ä¸‹ï¼Œè¿™æ ·çš„ä¸“æ éƒ½æ˜¯è°åœ¨ä¹°ã€‚\nåˆ«äººé€šè¿‡ä½ çš„é“¾æ¥ä¹°äº†ä¹‹åï¼Œä½ å°±å¯ä»¥è·å¾—åˆ†é”€æ”¶å…¥ã€‚\nä½†æ˜¯å§ï¼Œåˆ†é”€ç«™è¿™ä¸ªä¸œè¥¿ï¼Œå¯èƒ½ç¡®å®å¾—æœ‰ç‚¹ç§åŸŸæµé‡æ‰è¡Œï¼Œåœ¨pyqå‘åˆ†é”€çš„äºŒç»´ç ï¼Œæˆ–è€…å…¬ä¼—å·å‘æ–‡ç« ï¼Œæˆ–è€…è‡ªå·±çš„ç¤¾ç¾¤é‡Œå‘ä¸€ä¸‹è¿›è¡Œæ¨èã€‚\nå•çº¯é seoçš„è¯ï¼Œç›®å‰æ’åæ¯”è¾ƒé å‰çš„seoåšçš„éƒ½æŒºå¥½çš„ï¼Œæ–°ç«™æ„Ÿè§‰å¾—åšæŒä¹…åŒ–è¿è¥æœç´¢å¼•æ“æ’åæ‰èƒ½ä¸Šçš„å»ã€‚\nå•æœå°æŠ¥ç«¥ï¼Œå®˜ç½‘å äº†æ•´æ•´ä¸€å±ï¼Œä¸‹é¢çš„å°±æ˜¯ä¸€äº›åˆ†é”€ç«™äº†ã€‚\nå›åˆ°åˆ†é”€ç«™ï¼Œè¯¥å¦‚ä½•ä»01åˆ°1åšä¸€ä¸ªåˆ†é”€ç«™å‡ºæ¥ã€‚\næˆ‘åŠªåŠ›æœç´¢ï¼Œéƒ½æ²¡æœ‰æœç´¢å‡ºä¸€ä¸ªå¯ç”¨çš„åˆ†é”€å¯¼èˆªæ¨¡æ¿å‡ºæ¥ï¼Œæœ‰ç‚¹ç‚¹éš¾ã€‚\næ•°æ®æº åšå¯¼èˆªç«™é¦–å…ˆè¦æ‹¿åˆ°æ•°æ®ï¼Œç”±äºå°æŠ¥ç«¥çš„ç‰¹æ®Šæ€§(å»ä¸­å¿ƒåŒ–)ï¼Œæ‰€ä»¥æ²¡æ³•ä»å®˜ç½‘å¾—åˆ°æ‰€æœ‰ä¸“æ çš„æ•°æ®ã€‚\né‚£ä¹ˆå¯ä»¥é€‰æ‹©ä»ä»¥ä¸‹çš„å‡ ç§æ¸ é“æ‹¿åˆ°æ•°æ®\nå°æŠ¥ç«¥ç²¾é€‰å…¬ä¼—å·ï¼Œé‡Œé¢ä¼šæœ‰ä¸€äº›ç²¾é€‰ä¸“æ çš„æ¨èã€‚ pyqå„ç§æ•£è½çš„ä¸“æ æ¨è åˆ«äººæ•´ç†å¥½çš„ä¸“æ åˆ—è¡¨ çˆ¬å½“å‰å·²æœ‰çš„å°æŠ¥ç«¥å¯¼èˆªç«™çš„æ•°æ® å°æŠ¥ç«¥ç²¾é€‰ å°æŠ¥ç«¥ç²¾é€‰æ˜¯å°æŠ¥ç«¥å®˜æ–¹çš„å…¬ä¼—å·ã€‚\nè™½ç„¶æ˜¯å»ä¸­å¿ƒåŒ–ï¼Œä½†æ˜¯ä¸€ç‚¹å…¥å£éƒ½çœ‹ä¸åˆ°ï¼Œä¸“æ çš„æ¨å¹¿ç¡®å®æ˜¯ä¼šå—é˜»ã€‚\næ‰€ä»¥æœ‰äº†å°æŠ¥ç«¥ç²¾é€‰è¿™ä¸ªäº‹ã€‚\nç²¾é€‰æ–‡ç« æ¯æœŸä¼šæ¨èä¸€äº›æœ‰ä»·å€¼çš„ä¸“æ ã€‚æ‰€ä»¥ç²¾é€‰æ˜¯ä¸ªè·å–ä¸“æ åˆ—è¡¨çš„è·¯å­ã€‚ä½†æ˜¯ç²¾é€‰åªèƒ½æ‹¿åˆ°ä¸€éƒ¨åˆ†çš„ä¸“æ ã€‚\npyq pyqåŠ çš„ä¸€äº›äººï¼Œä¼šå»æ¨èä¸“æ ï¼Œä»–ä»¬ä¹°äº†ä¹‹åï¼Œä¼šå‘ä»–ä»¬è‡ªå·±çš„ä¸“å±åˆ†é”€æµ·æŠ¥ã€‚\næœ‰æ—¶å€™æˆ‘ä¹Ÿä¼šå»é€šè¿‡ä»–ä»¬çš„é“¾æ¥ä¹°ä¸€ç‚¹ï¼Œä½†æ˜¯è¿™ç§å°±æ˜¯éšç¼˜ï¼Œæ•°é‡ä¹Ÿä¸ä¼šå¤ªå¤šã€‚\nåˆ«äººæ•´ç†å¥½çš„ä¸“æ åˆ—è¡¨ æˆ‘åœ¨ç½‘ä¸Šå†²æµªçš„æ—¶å€™ï¼Œå‘ç°äº†åˆ«äººæœ‰ä¸€ä»½æ•´ç†å¥½çš„ä¸“æ åˆ—è¡¨ï¼Œä½†æ˜¯è¿™ä¸ªå¯èƒ½ä¼šæœ‰æ—¶æ•ˆæ€§çš„é—®é¢˜ï¼Œä½œè€…æ›´æ–°ä¸åŠæ—¶ï¼Œå°±æ‹¿ä¸åˆ°å¢é‡çš„ä¸“æ åˆ—è¡¨ã€‚\nä¸‹é¢è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ°‘é—´çš„ç‰ˆæœ¬ï¼Œä¸Šæ¬¡æ›´æ–°è¿˜æ˜¯åœ¨2å¹´å‰ã€‚\nhttps://github.com/qianguyihao/xiaobot-list?tab=readme-ov-file\nçˆ¬å½“å‰å·²æœ‰çš„å¯¼èˆªç«™çš„æ•°æ® è¿™æ¡è·¯æˆ‘æ„Ÿè§‰æ˜¯æœ€å¥½çš„ï¼Œå¤šé€‰å‡ ä¸ªå¯¼èˆªç«™ï¼ŒæŠŠä»–ä»¬çš„ä¸“æ åˆ—è¡¨éƒ½çˆ¬ä¸€éï¼Œç„¶åå»ä¸ªé‡ï¼Œå°±å¾—åˆ°äº†æœ€æ–°æœ€å…¨çš„ä¸“æ åˆ—è¡¨äº†ã€‚\næ•°æ®æºçš„é€‰æ‹© ä¸Šé¢ä»‹ç»äº†å‡ ç§æ•°æ®æ¥æºï¼Œæˆ‘è¿™è¾¹é€‰æ‹©çš„æ˜¯çˆ¬å°æŠ¥ç«¥ç²¾é€‰çš„æ¨èåˆ—è¡¨ã€‚å…¶å®æ›´å¥½çš„æ˜¯å»çˆ¬å·²æœ‰å¯¼èˆªç«™çš„æ•°æ®ã€‚\nä¸è¿‡å°±ç²¾é€‰ä¸“æ è€Œè¨€ï¼Œå®˜æ–¹çš„å…¶å®æ›´å¥½ï¼Œæ¯•ç«Ÿå®˜æ–¹å·²ç»åšè¿‡ä¸€è½®ç­›é€‰äº†ï¼Œèƒ½ä¸Šæ¨èçš„è‚¯å®šæœ‰å…¶ä¼˜ç‚¹ã€‚\næ•°æ®æ•´ç†åˆ†ç±» é€‰æ‹©å¥½ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦å¯¹æ¨èåˆ—è¡¨è¿›è¡Œåˆ†ç±»ï¼Œè®¢é˜…å·é‡Œæœ‰ç›®å‰æ‰€æœ‰çš„ä¸“æ æ¨èåˆ—è¡¨ã€‚æˆªæ­¢åˆ°ç°åœ¨ä¸€å…±æœ‰26æœŸã€‚\né‚£ä¹ˆå¯¹æ¨èåˆ—è¡¨è¿›è¡Œæ•´ç†å°±æœ‰2ç§æ–¹æ³•ã€‚\näººå·¥æ•´ç† çˆ¬è™«åˆ†ç±» 26æœŸçš„è¯ï¼Œç‚¹å¼€26æ¡å…¬ä¼—å·æ–‡ç« ï¼Œæ”¶é›†ä¸‹æ‰€æœ‰çš„æ¨èä¸“æ çš„äºŒç»´ç ï¼Œå€’ä¹Ÿè¿˜å¥½ã€‚\nä½†æ˜¯ä½œä¸ºä¸€ä¸ªèµ„æ·±crud boyï¼Œèƒ½å†™ä»£ç å°±å†™ä»£ç ã€‚ä¸èƒ½å†™ä»£ç ï¼Œå°±è®©chatgptå¸®æˆ‘ä»¬å†™ä»£ç ã€‚\nè¯­è¨€é€‰æ‹©çš„æ˜¯Java(èµ„æ·±java crudä»”)ã€‚\né€‰æ‹©çš„æ¡†æ¶æœ‰å¦‚ä¸‹å‡ ä¸ª\nJsoup, ç”¨äºè§£æhtml Fastjson2ï¼Œç”¨äºå­—ç¬¦ä¸²è½¬jsonå¤„ç† Hutoolï¼Œhttp\u0026äºŒç»´ç è¯†åˆ« selenium, ç”¨äºæµè§ˆå™¨æ¨¡æ‹Ÿï¼Œä¸€äº›å¼‚æ­¥åŠ è½½çš„é¡µé¢éœ€è¦ç”¨åˆ°è¿™ä¸ª commons-ioï¼Œæ–‡ä»¶æ“ä½œ ä¸‹é¢å°±æ˜¯å®æ“äº†\nå¦‚ä½•æ‹¿åˆ°ä¸“æ æ¨èåˆ—è¡¨ é¦–å…ˆæ˜¯è¿›å…¥å°æŠ¥ç«¥ç²¾é€‰ å…¬ä¼—å·çš„èŠå¤©é¡µé¢ï¼Œå·¦ä¸‹è§’æœ‰ä¸ªå¾€æœŸå›é¡¾ï¼Œè¿™é‡Œå°±æ˜¯æ¨èä¸“æ çš„åˆé›†é¡µé¢ã€‚\nç„¶åç‚¹å‡»å³ä¸Šè§’ï¼Œé€‰æ‹©å¤åˆ¶é“¾æ¥ï¼Œæˆ–è€…é€‰æ‹©ä½¿ç”¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€ï¼Œå°±å¯ä»¥æ‹¿åˆ°è®¢é˜…åˆ—è¡¨çš„url\nä¸‹é¢å°±æ˜¯é¡µé¢åˆ†æäº†ï¼Œé€šè¿‡æ»‘åŠ¨é¡µé¢çŒœæµ‹è¿™ä¸ªåˆ—è¡¨æ˜¯åˆ†é¡µåŠ è½½çš„ã€‚\nå¯ä»¥åœ¨æ§åˆ¶å°çœ‹ç½‘ç»œè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥çœ‹çš„å‡ºæ¥ã€‚\nuriä¸­æœ‰ä¸€ä¸ªå…³é”®çš„keyï¼Œappmsgalbumï¼Œ è¿™ä¸ªçœ‹ç€åƒæ˜¯åˆ—è¡¨çš„è¯·æ±‚ã€‚ç»è¿‡æµ‹éªŒï¼Œè¿™ä¸ªç¡®å®æ˜¯åˆ†é¡µå‚æ•°ã€‚\næµè§ˆå™¨åœ°å€æ çš„é“¾æ¥è®¿é—®åªèƒ½è®¿é—®åˆ°ç¬¬ä¸€é¡µçš„é¡µé¢ã€‚ä¸‹é¢å°±è¦é åˆ†é¡µæŸ¥è¯¢æ‹¿æ•°æ®äº†ã€‚\nä¸‹é¢çš„åˆ†é¡µè¯·æ±‚è¿”å›çš„æ˜¯jsonæ•°æ®ï¼Œç¬¬ä¸€é¡µæ˜¯htmlæ•°æ®ã€‚\nåˆ†é¡µå‚æ•°æœ‰2ä¸ªæ¯”è¾ƒå…³é”®çš„keyï¼Œbegin_msgidå’Œbegin_itemidxï¼Œè¿™ä¸ªä¸€ä¸ªæ˜¯åˆ†é¡µå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æ¶ˆæ¯idï¼Œä¼ å…¥é¡µæ•°å’Œidï¼ŒæŸ¥è¯¢ä¸‹é¢çš„æ¶ˆæ¯\nè¿™æ ·çš„è¯å°±å¯ä»¥æ‹¿åˆ°æ‰€æœ‰çš„æ¨èæ–‡ç« çš„è¯¦ç»†é“¾æ¥äº†ã€‚æ¯ä¸€ç¯‡æ–‡ç« æœ‰ä¸€ä¸ªä¸“é¢˜æ¨èï¼ŒåŒ…å«æ•°ä¸ªä¸“æ çš„æ¨è\nç»è¿‡é¡µé¢å…ƒç´ å®¡æŸ¥ä»¥åŠdebugï¼Œå¾—åˆ°äº†å¦‚ä¸‹è·å–è®¢é˜…åˆ—è¡¨æ¯ç¯‡æ–‡ç« åœ°å€çš„æ–¹æ³•\nå¸¸é‡ç±»å¦‚ä¸‹\npublic class Constants { public static final String XIAOBOT_WECHAT_SUBSCRIBE_LIST_URL = \"https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum\u0026__biz=Mzg4MTc0MDcyOA==\u0026scene=1\u0026album_id=2262723582487429130\u0026count=100\u0026uin=\u0026key=\u0026devicetype=iMac+MacBookPro18%2C1+OSX+OSX+14.5+build(23F79)\u0026version=13080811\u0026lang=zh_CN\u0026nettype=WIFI\u0026ascene=0\u0026fontScale=100\"; public static final String LOCAL_CHROME_DRIVER_PATH = \"/Users/since/Downloads/chromedriver-mac-arm64/chromedriver\"; public static final String LIST_NEXT_URL_FORMAT = \"https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum\u0026__biz=Mzg4MTc0MDcyOA==\u0026album_id=2262723582487429130\u0026count=100\u0026begin_msgid=%s\u0026begin_itemidx=%s\u0026uin=\u0026key=\u0026pass_ticket=\u0026wxtoken=\u0026devicetype=iMac\u0026nbsp;MacBookPro18,1\u0026nbsp;OSX\u0026nbsp;OSX\u0026nbsp;14.5\u0026nbsp;build(23F79)\u0026clientversion=13080811\u0026__biz=Mzg4MTc0MDcyOA==\u0026appmsg_token=\u0026x5=0\u0026f=json\"; } è·å–è®¢é˜…åˆ—è¡¨æ–¹æ³•\nimport cn.hutool.http.HttpUtil; import com.alibaba.fastjson2.JSON; import com.alibaba.fastjson2.JSONArray; import com.alibaba.fastjson2.JSONObject; import com.thend03.xiaobot.spider.constants.Constants; import com.thend03.xiaobot.spider.model.ArticleDetail; import com.thend03.xiaobot.spider.model.WechatModel; import org.apache.commons.collections4.CollectionUtils; import org.apache.commons.lang3.StringUtils; import org.jsoup.Jsoup; import org.jsoup.nodes.Attributes; import org.jsoup.nodes.Document; import org.jsoup.nodes.Element; import org.jsoup.select.Elements; import java.net.MalformedURLException; import java.nio.charset.StandardCharsets; import java.util.ArrayList; import java.util.List; import java.util.Objects; import java.util.stream.Collectors; /** * å°æŠ¥ç«¥ä¸“æ ç²¾é€‰è®¢é˜…å·åˆ—è¡¨è§£ææœåŠ¡ * * @author since * @date 2024-07-17 08:12 */ public class WechatSubscribeListService { public static List\u003cArticleDetail\u003e parseArticleList() { String content = HttpUtil.downloadString(Constants.XIAOBOT_WECHAT_SUBSCRIBE_LIST_URL, StandardCharsets.UTF_8); Document parse = Jsoup.parse(content); Elements albumListItem = parse.getElementsByClass(\"album__list-item\"); System.out.println(1); List\u003cWechatModel\u003e list = new ArrayList\u003c\u003e(); boolean hasNext = true; for (Element element : albumListItem) { Attributes attributes = element.attributes(); System.out.println(2); if (attributes.isEmpty()) { continue; } String s = attributes.get(\"data-msgid\"); String s1 = attributes.get(\"data-itemidx\"); String s2 = attributes.get(\"data-link\"); String s3 = attributes.get(\"data-title\"); String s4 = attributes.get(\"data-pos_num\"); WechatModel wechatModel = new WechatModel(); wechatModel.setDataMsgId(parseLong(s)); wechatModel.setDataItemIndex(parseInt(s1)); wechatModel.setDataLink(s2); wechatModel.setDataTitle(s3); wechatModel.setDataPosNum(parseInt(s4)); list.add(wechatModel); if (wechatModel.getDataPosNum() == 1) { hasNext = false; } } while (hasNext) { List\u003cWechatModel\u003e list1 = nextParse(list.get(list.size() - 1)); if (CollectionUtils.isNotEmpty(list1)) { list.addAll(list1); } if (list1.get(list1.size() - 1).getDataPosNum() == 1) { hasNext = false; } } List\u003cString\u003e urlList = new ArrayList\u003c\u003e(); list.stream().filter(Objects::nonNull).forEach(s -\u003e { List\u003cString\u003e urlList1 = WechatDetailService.getUrlList(s.getDataLink()); if (CollectionUtils.isNotEmpty(urlList1)) { urlList.addAll(urlList1); } }); List\u003cString\u003e collect = urlList.stream().filter(StringUtils::isNotBlank).filter(s -\u003e s.contains(\"http\") \u0026\u0026 s.contains(\"xiaobot.net/p\")).map(s -\u003e { String[] split = s.split(\"\\\\?\"); return split[0]; }).distinct().collect(Collectors.toList()); List\u003cArticleDetail\u003e collect1 = collect.stream().filter(Objects::nonNull).map(url -\u003e { String host = null; String uniqueId = null; try { host = WechatDetailService.getHost(url); } catch (MalformedURLException e) { } try { uniqueId = WechatDetailService.getArticleUniqueId(url); } catch (MalformedURLException e) { throw new RuntimeException(e); } return WechatDetailService.getArticleDetail(host, uniqueId); }).collect(Collectors.toList()); return collect1; } public static long parseLong(String dataMsgId) { try { return Long.parseLong(dataMsgId); } catch (Exception e) { e.printStackTrace(); } return -1; } public static int parseInt(String itemIndex) { try { return Integer.parseInt(itemIndex); } catch (Exception e) { e.printStackTrace(); } return -1; } public static List\u003cWechatModel\u003e nextParse(WechatModel wechatModel) { List\u003cWechatModel\u003e list = new ArrayList\u003c\u003e(); String format = String.format(Constants.LIST_NEXT_URL_FORMAT, wechatModel.getDataMsgId(), wechatModel.getDataItemIndex()); String content = HttpUtil.downloadString(format, StandardCharsets.UTF_8); JSONObject jsonObject = JSON.parseObject(content); JSONObject getalbumResp = jsonObject.getJSONObject(\"getalbum_resp\"); JSONArray articleList = getalbumResp.getJSONArray(\"article_list\"); for (int i = 0; i \u003c articleList.size(); i++) { Object o = articleList.get(i); if (o instanceof JSONObject) { JSONObject json = (JSONObject) o; long msgid = json.getLongValue(\"msgid\"); int itemidx = json.getIntValue(\"itemidx\"); int posNum = json.getIntValue(\"pos_num\"); String title = json.getString(\"title\"); String link = json.getString(\"url\"); WechatModel nextWechatModel = new WechatModel(); nextWechatModel.setDataMsgId(msgid); nextWechatModel.setDataItemIndex(itemidx); nextWechatModel.setDataLink(link); nextWechatModel.setDataTitle(title); nextWechatModel.setDataPosNum(posNum); list.add(nextWechatModel); } } return list; } } å¦‚ä½•æ‹¿åˆ°ä¸“æ åœ°å€ åœ¨ä¸Šä¸€æ­¥ æˆ‘ä»¬æ‹¿åˆ°äº†26ç¯‡ç²¾é€‰æ¨èçš„æ–‡ç« åœ°å€åˆ—è¡¨ï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬éœ€è¦è§£ææ¯ä¸€ç¯‡æ–‡ç« è¯¦æƒ…ï¼Œæ‹¿åˆ°è¿™ä¸€æ‰¹æ¨èçš„ä¸“æ åˆé›†ã€‚\næ¯ä¸€ç¯‡æ–‡ç« é‡Œéƒ½ä¼šæ¨è1~Nç¯‡æ–‡ç« ï¼Œæ•°é‡ä¸ç­‰ã€‚\næˆ‘æ‹¿å‡ ç¯‡æ–‡ç« åˆ†æäº†ä¸€ä¸‹ï¼Œæ¯ç¯‡æ–‡ç« çš„ä¸“æ æ²¡æœ‰ç‰¹å®šçš„æ ‡ç­¾ï¼Œä½†æ˜¯ç”±äºæ˜¯å…¬ä¼—å·æ–‡ç« ï¼Œæ‰€ä»¥ä¸“æ éƒ½æ˜¯ä»¥å›¾ç‰‡äºŒç»´ç çš„å½¢å¼æä¾›çš„ã€‚\nå³èƒ½æ‹¿åˆ°æ‰€æœ‰çš„ä¸“æ äºŒç»´ç å›¾ç‰‡å³å¯ã€‚\nä»¥åºå·26çš„è¿™ç¯‡æ–‡ç« ä¸ºä¾‹\næ¨èçš„ä¸“æ ä»¥æ–‡å­—ä»‹ç»+äºŒç»´ç çš„å›¾ç‰‡æ ¼å¼æä¾›å‡ºæ¥ã€‚\nè¿™ç¯‡æ–‡ç« ä¸€å…±æ¨èäº†4ä¸ªä¸“æ ï¼Œç†è®ºä¸Šæˆ‘ä»¬æ‹¿åˆ°è¿™4ä¸ªä¸“æ çš„å›¾ç‰‡äºŒç»´ç å°±å¯ä»¥äº†ã€‚\né‚£ä¹ˆæ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œè¿›è¡Œå…ƒç´ å®¡æŸ¥ï¼Œåœ¨imgæ ‡ç­¾é‡Œçš„data-srcå­—æ®µå¯ä»¥æ‹¿åˆ°å›¾ç‰‡åœ°å€\nç°åœ¨çš„è·å–å›¾ç‰‡åœ°å€çš„æ–¹æ³•è¿‡äºç”Ÿç¡¬äº†ï¼Œéœ€è¦ä»scripté‡Œè§£æå˜é‡é‡é‡ç¡¬è§£ææ‰èƒ½æ‹¿åˆ°å›¾ç‰‡åœ°å€\nList\u003cString\u003e result = new ArrayList\u003c\u003e(); String content = HttpUtil.downloadString(wechatUrl, StandardCharsets.UTF_8); Document parse = Jsoup.parse(content); Elements scripts = parse.getElementsByTag(\"script\"); for (Element script : scripts) { List\u003cNode\u003e nodes = script.childNodes(); for (Node node : nodes) { if (node instanceof DataNode) { DataNode dataNode = (DataNode) node; String wholeData = dataNode.getWholeData(); if (wholeData.contains(\"cdn_url\")) { String[] split = wholeData.split(\"var\"); for (int i = 0; i \u003c split.length; i++) { String s = split[i]; if (s.contains(\"picturePageInfoList\") \u0026\u0026 s.contains(\"http\")) { String[] split1 = s.split(\"picturePageInfoList\"); String cdnUrl = split1[1]; String s1 = cdnUrl.replaceAll(\"\\\\[\", \"\") .replaceAll(\"]\", \"\") .replaceAll(\"\\\\{\", \"\") .replaceAll(\"}\", \"\") .replaceAll(\"'\", \"\") .replaceAll(\"\\\"\", \"\"); String[] split2 = s1.split(\",\"); for (int j = 0; j \u003c split2.length; j++) { if (split2[j].contains(\"cdn_url\")) { String[] split3 = split2[j].split(\"cdn_url:\"); result.add(split3[1]); } } } } } } } } å…¶å®æ¢ä¸ªæ–¹æ³•ï¼Œä¸€å¥è¯å°±å¯ä»¥æå–æ‰€æœ‰å›¾ç‰‡åœ°å€äº†, ä½¿ç”¨selectæ–¹æ³•ï¼Œæ ‡ç­¾+å±æ€§å³å¯ã€‚\né‚£ä¹ˆæ‹¿åˆ°å›¾ç‰‡åœ°å€ä¹‹åï¼Œä½¿ç”¨hutoolè¿›è¡ŒäºŒç»´ç è¯†åˆ«ï¼ŒæŠ¥é”™äº†å°±å¿½ç•¥å¼‚å¸¸ï¼Œæœ‰äºŒç»´ç çš„èƒ½æˆåŠŸè§£æï¼Œé‚£ä¹ˆæ­£å¸¸è§£æçš„å°±æ˜¯äºŒç»´ç åœ°å€äº†ã€‚\npublic static String hutoolOcr(String imageUrl) throws IOException, URISyntaxException { String finalUrl = \"\"; File file = HttpUtil.downloadFileFromUrl(imageUrl, \"static/\" + COUNT.getAndIncrement() + \".png\"); try { finalUrl = QrCodeUtil.decode(file); } catch (Exception e) { e.printStackTrace(); } return finalUrl; } è¿™æ ·å°±æ‹¿åˆ°æ¯æœŸç²¾é€‰çš„æ‰€æœ‰çš„æ¨èä¸“æ åˆ—è¡¨äº†\nå¦‚ä½•è·å–ä¸“æ çš„è¯¦æƒ… é‚£ä¹ˆæ‹¿åˆ°ä¸“æ åœ°å€ä¹‹åï¼Œå°±æ˜¯å»å¤„ç†ä¸“æ äº†ï¼Œæˆ‘ä»¬ä¸Šä¸€æ­¥æ‹¿åˆ°çš„åªæ˜¯ä¸“æ çš„åœ°å€ï¼Œä¸“æ æ ‡é¢˜ã€ä½œè€…ã€ä¸“æ å¤´åƒã€ä¸“æ ä»‹ç»ã€ä¸“æ çš„å·²è´­æ•°ã€æ–‡ç« æ•°ï¼Œéƒ½éœ€è¦ä»ä¸“æ é‡Œè·å–ã€‚\næ‰“å¼€æ§åˆ¶å°ï¼Œè¿™å‡ ä¸ªæ¥å£æŠŠæ‰€æœ‰çš„æ•°æ®éƒ½è¿”å›äº†ï¼Œä¸”è¿”å›çš„æ˜¯jsonæ•°æ®ï¼Œæ‰€ä»¥çœ‹ç€å¾ˆç¾å¥½ã€‚\nä½†æ˜¯è¿™å‡ ä¸ªæ¥å£éƒ½æ˜¯è¦ç­¾åçš„ï¼Œæ•´ä¸ªé¡µé¢æ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œæ— æ³•ä½¿ç”¨jsoupè¿›è¡Œè§£æã€‚è€Œä¸”ä¹Ÿä¸çŸ¥é“ç­¾åè§„åˆ™ï¼Œæ‰€ä»¥è¿™æ¡è·¯è¡Œä¸é€šã€‚\nåæ¥ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œå¯ä»¥ä½¿ç”¨seleniumæ¨¡æ‹Ÿæµè§ˆå™¨ï¼Œç­‰å¾…é¡µé¢å¼‚æ­¥åŠ è½½å®Œæˆï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨jsoupè§£æé¡µé¢äº†ã€‚\nä½¿ç”¨seleniuméœ€è¦åœ¨ä¸‹è½½chromeé©±åŠ¨åˆ°æœ¬åœ°ï¼Œchromeé©±åŠ¨éœ€è¦å’Œè‡ªå·±çš„chromeæµè§ˆå™¨ç‰ˆæœ¬ç›¸ç­‰æˆ–ç›¸è¿‘ï¼Œç‰ˆæœ¬ä¸è¦å·®å¤ªå¤šã€‚\n114ä¹‹å‰çš„ç‰ˆæœ¬åœ¨https://chromedriver.storage.googleapis.com/index.htmlä¸‹è½½\n127ä¹‹åçš„ç‰ˆæœ¬åœ¨https://googlechromelabs.github.io/chrome-for-testing/ä¸‹è½½\n115-126çš„æš‚æ—¶æ²¡æ‰¾åˆ°ï¼Œéšç€æ—¶é—´æ¨ç§»ï¼Œè¿™ä¸ªæœ€æ–°çš„ç‰ˆæœ¬ä¹Ÿå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–\nè®°å¾—æ˜¯ä¸‹è½½chromedriver\næ‹¿åˆ°driverä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ä»£ç æ¨¡æ‹Ÿæµè§ˆå™¨çš„é¡µé¢å¼‚æ­¥åŠ è½½è¿‡ç¨‹ï¼Œå¾—åˆ°å®Œæ•´çš„é¡µé¢äº†ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨jsoupè§£æé¡µé¢å…ƒç´ \npublic static String getArticleFullPage(String url) { // è®¾ç½® ChromeDriver è·¯å¾„ System.setProperty(\"webdriver.chrome.driver\", Constants.LOCAL_CHROME_DRIVER_PATH); // è®¾ç½® Chrome é€‰é¡¹ ChromeOptions options = new ChromeOptions(); options.addArguments(\"--headless\"); // æ— å¤´æ¨¡å¼ // å¯åŠ¨ Chrome æµè§ˆå™¨ WebDriver driver = new ChromeDriver(options); // è®¿é—®ç›®æ ‡ç½‘é¡µ driver.get(url); String pageContent = null; // ç­‰å¾…ç½‘é¡µåŠ è½½å®Œæˆï¼ˆæ ¹æ®éœ€è¦è°ƒæ•´ç­‰å¾…æ—¶é—´ï¼‰ try { Thread.sleep(2000); // è·å–ç½‘é¡µå†…å®¹ pageContent = driver.getPageSource(); // æ‰“å°ç½‘é¡µå†…å®¹ System.out.println(pageContent); } catch (InterruptedException e) { e.printStackTrace(); } finally { driver.quit(); } return pageContent; } æ•´ä½“è§£ææ–‡ç« è¯¦æƒ…çš„æ–¹æ³•å¦‚ä¸‹\npublic static ArticleDetail getArticleDetail(String host, String uniqueId) { String url = \"https://\" + host + \"/p/\" + uniqueId; String articleFullPage = getArticleFullPage(url); Document document = Jsoup.parse(articleFullPage); Elements title = document.getElementsByTag(\"title\"); Elements intro = document.getElementsByClass(\"intro\"); Elements description = document.getElementsByClass(\"description\"); Elements posts = document.getElementsByClass(\"posts\"); Elements elementsByClass = document.getElementsByClass(\"paper\"); Elements num = document.getElementsByClass(\"num\"); Elements avatar = document.getElementsByClass(\"avatar\"); String articleTitle = getArticleTitle(title); String articleDescription = getArticleDescription(description); String articleIntro = getArticleIntro(intro); Map\u003cString, Integer\u003e articleNum = getArticleNum(num); String articleAvatar = getArticleAvatar(avatar); ArticleDetail articleDetail = new ArticleDetail(); articleDetail.setAvatarBase64(articleAvatar); // articleDetail.setGmtCreate(createdAt); articleDetail.setIntroduction(articleIntro); // articleDetail.setFreePostCount(freePostCount); articleDetail.setPostCount(articleNum.get(\"post\")); articleDetail.setTitle(articleTitle); articleDetail.setSubscriberCount(articleNum.get(\"reader\")); articleDetail.setUrl(url); System.out.println(1); return articleDetail; } public static String getHost(String articleUrl) throws MalformedURLException { java.net.URL url = new URL(articleUrl); return url.getHost(); } public static String getArticleUniqueId(String articleUrl) throws MalformedURLException { java.net.URL url = new URL(articleUrl); String path = url.getPath(); return path.replaceAll(\"/p/\", \"\"); } public static String getArticleFullPage(String url) { // è®¾ç½® ChromeDriver è·¯å¾„ System.setProperty(\"webdriver.chrome.driver\", Constants.LOCAL_CHROME_DRIVER_PATH); // è®¾ç½® Chrome é€‰é¡¹ ChromeOptions options = new ChromeOptions(); options.addArguments(\"--headless\"); // æ— å¤´æ¨¡å¼ // å¯åŠ¨ Chrome æµè§ˆå™¨ WebDriver driver = new ChromeDriver(options); // è®¿é—®ç›®æ ‡ç½‘é¡µ driver.get(url); String pageContent = null; // ç­‰å¾…ç½‘é¡µåŠ è½½å®Œæˆï¼ˆæ ¹æ®éœ€è¦è°ƒæ•´ç­‰å¾…æ—¶é—´ï¼‰ try { Thread.sleep(2000); // è·å–ç½‘é¡µå†…å®¹ pageContent = driver.getPageSource(); // æ‰“å°ç½‘é¡µå†…å®¹ System.out.println(pageContent); } catch (InterruptedException e) { e.printStackTrace(); } finally { driver.quit(); } return pageContent; } /** * ä¸“æ çš„æ ‡é¢˜ * @param title title element * @return title */ public static String getArticleTitle(Elements title) { if (Objects.isNull(title)) { return null; } if (title.isEmpty()) { return null; } List\u003cString\u003e result = new ArrayList\u003c\u003e(); for (Element element : title) { List\u003cNode\u003e nodes = element.childNodes(); if (CollectionUtils.isEmpty(nodes)) { continue; } List\u003cString\u003e collect = nodes.stream().filter(Objects::nonNull).map(node -\u003e { if (node instanceof TextNode) { return ((TextNode) node).text(); } return null; }).collect(Collectors.toList()); result.addAll(collect); } return StringUtils.join(result, \",\"); } public static String getArticleDescription(Elements description) { if (Objects.isNull(description)) { return null; } if (description.isEmpty()) { return null; } List\u003cString\u003e result = new ArrayList\u003c\u003e(); Iterator\u003cElement\u003e iterator = description.iterator(); while (iterator.hasNext()) { Element next = iterator.next(); List\u003cString\u003e list = parseNode(next); result.add(StringUtils.join(list, \"\")); } String join = StringUtils.join(result, \"\"); return join.replaceAll(\"\n\", \"\\r\\n\\n\"); } public static String getArticleIntro(Elements intro) { if (Objects.isNull(intro)) { return null; } if (intro.isEmpty()) { return null; } List\u003cString\u003e result = new ArrayList\u003c\u003e(); for (Element next : intro) { List\u003cString\u003e list = parseNode(next); result.add(StringUtils.join(list, \"\")); } String join = StringUtils.join(result, \"\"); return join.replaceAll(\"\n\", \"\\r\\n\"); } public static Map\u003cString, Integer\u003e getArticleNum(Elements num) { if (Objects.isNull(num)) { return Collections.emptyMap(); } if (num.isEmpty()) { return Collections.emptyMap(); } Element reader = num.get(0); Element post = num.get(1); TextNode node = (TextNode) reader.childNodes().get(0); String text = node.text(); TextNode postNode = (TextNode) post.childNodes().get(0); String text1 = postNode.text(); Map\u003cString, Integer\u003e map = new HashMap\u003c\u003e(4); map.put(\"reader\", Integer.parseInt(text)); map.put(\"post\", Integer.parseInt(text1)); return map; } public static String getArticleAvatar(Elements avatar) { if (Objects.isNull(avatar)) { return null; } if (avatar.isEmpty()) { return null; } Element element = avatar.get(0); String avatarUrl = element.attributes().get(\"src\"); byte[] bytes = HttpUtil.downloadBytes(avatarUrl); return \"data:image/jpeg;base64,\" + Base64.getEncoder().encodeToString(bytes); } /** * è§£ænodeè¯¦æƒ…ï¼Œéœ€è¦é€’å½’ï¼Œtext node/element * @param element element * @return list */ public static List\u003cString\u003e parseNode(Element element) { if (Objects.isNull(element)) { return null; } List\u003cNode\u003e nodes = element.childNodes(); if (CollectionUtils.isEmpty(nodes)) { return null; } List\u003cString\u003e result = new ArrayList\u003c\u003e(); for (Node node : nodes) { List\u003cNode\u003e textNodeList = node.childNodes(); if (CollectionUtils.isEmpty(textNodeList)) { if (node instanceof TextNode) { result.add(((TextNode) node).text()); } else { result.add(node.toString()); } continue; } List\u003cString\u003e subList = new ArrayList\u003c\u003e(); for (Node text : textNodeList) { if (Objects.isNull(text)) { continue; } if (text instanceof TextNode) { subList.add(((TextNode) text).text()); } else if (text instanceof Element) { List\u003cString\u003e list = parseNode((Element) text); if (CollectionUtils.isNotEmpty(list)) { subList.add(StringUtils.join(list, \"\")); } } else { subList.add(text.toString()); } } result.add(StringUtils.join(subList, \"\")); } return result; } å‰ç«¯é¡µé¢å±•ç¤º ç”±äºæˆ‘æ˜¯å‰ç«¯åºŸï¼Œæ‰¾äº†ä¸ªå¼€æºçš„å¯¼èˆªé¡¹ç›®å½“æ¨¡æ¿ï¼Œæ‰¾æˆ‘çš„å‰ç«¯æœ‹å‹æ”¹äº†ä¸€ä¸‹ã€‚\nå¼€æºé¡¹ç›®åœ°å€å¦‚ä¸‹: https://github.com/jic999/moon-web-start\nç»è¿‡ä¿®æ”¹çš„å‰ç«¯é¡¹ç›®åœ°å€å¦‚ä¸‹: https://github.com/gloaming123/moon-web-start\nåç«¯ä»£ç é¡¹ç›®åœ°å€å¦‚ä¸‹: https://github.com/thend03/xiaobot-spider\nè¿™ä¸ªå¯¼èˆªé¡¹ç›®è‡ªåŠ¨github pageséƒ¨ç½²ï¼Œå¯ä»¥ç›´æ¥åœ¨ä»“åº“çš„actionsç‚¹å‡»è¿è¡Œï¼Œå¯ä»¥åœ¨jobçš„è¿è¡Œæ—¥å¿—é‡Œå¾—åˆ°é¡µé¢è®¿é—®åœ°å€ã€‚\nä¸ºäº†ä¼˜åŒ–åŠ è½½é€Ÿåº¦ï¼Œæˆ‘è¿™è¾¹ç”Ÿæˆçš„è¯¦æƒ…ï¼Œå°†ä¸“æ çš„å¤´åƒè½¬æˆäº†base64ï¼Œå‰ç«¯å†å°†base64è½¬æˆæœ¬åœ°å›¾ç‰‡ï¼Œä¼˜åŒ–äº†åŠ è½½é€Ÿåº¦ã€‚\næ€»ç»“ é‚£ä¹ˆç»è¿‡ä¸€ç³»åˆ—çš„å‹¾å…‘ï¼Œå°±æ‹¿åˆ°äº†ä¸“æ çš„è¯¦æƒ…ã€‚\næ€»å¾—æ¥è¯´ï¼Œåç«¯å°±æ˜¯ä½¿ç”¨äº†http+jsoupè§£æäº†é¡µé¢ï¼Œæ²¡æœ‰ä»€ä¹ˆéš¾çš„ã€‚å¯¹apiç†Ÿæ‚‰çš„è¯é€Ÿåº¦ä¼šæ›´å¿«ä¸€ç‚¹ã€‚\næ²¡æœ‰æ¶‰åŠå¤§è§„æ¨¡çš„çˆ¬è™«ï¼Œç®—æ˜¯ä¸€æ¬¡ç®€å•çš„å°è¯•å§ã€‚\nå¯¹æˆ‘æ¥è¯´éš¾çš„æœç„¶è¿˜æ˜¯å‰ç«¯å‘€ï¼Œéœ€è¦æˆ‘çš„å‰ç«¯åˆä¼™äººæŒç»­å‘åŠ›ï¼Œå®ç°å‰ç«¯é¡µé¢äº†ã€‚\nå‰ç«¯åœ°å€ï¼Œé‚£ä¸ªä¸“å±åˆ†é”€ç éœ€è¦è‡ªå·±æ›¿æ¢ï¼Œç”±äºæˆ‘ä¸æ‡‚å‰ç«¯ï¼Œæ²¡æ³•ç»™å‡ºè¯¦ç»†çš„ä½¿ç”¨è¯´æ˜ï¼Œæˆ‘è‡ªå·±çš„åˆ†é”€ç æ˜¯æˆ‘çš„å‰ç«¯æœ‹å‹å¸®æˆ‘ä¸“é—¨å†™åˆ°ä¸€ä¸ªåˆ†æ”¯é‡Œäº†ã€‚\nå¦å¤–çˆ¬ç²¾é€‰åˆ—è¡¨ï¼Œåªèƒ½æ‹¿åˆ°éƒ¨åˆ†ä¸Šæ¨èçš„ä¸“æ ï¼Œå…¶ä»–ä¸åœ¨æ¨èé‡Œçš„ï¼Œè¦ä¹ˆå»å…¶ä»–çš„å¯¼èˆªç«™çˆ¬ï¼Œè¦ä¹ˆé å…¶ä»–æ•£è½çš„åœ°æ–¹ä¼ æ’­äº†ã€‚\nå°æŠ¥ç«¥çš„ä¸“æ ä»·æ ¼éƒ½ä¸å¤§è´µï¼Œé€‚åˆå½“çŸ¥è¯†ä»˜è´¹çš„å°å†Œæ¥è´­ä¹°ï¼Œæœ‰çš„å¯ä»¥æ¥ç‚¹å¯å‘æˆ‘è§‰å¾—å°±èƒ½å€¼å›ç¥¨ä»·äº†ã€‚\n","wordCount":"4734","inLanguage":"zh","datePublished":"2024-07-21T13:08:59+08:00","dateModified":"2024-07-21T13:08:59+08:00","author":{"@type":"Person","name":"since"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.thend03.com/posts/how-to-make-a-xiaobot-nav/"},"publisher":{"@type":"Organization","name":"Fayy\u0026Fc's Blog","logo":{"@type":"ImageObject","url":"https://blog.thend03.com/img/logo.jpg"}}}</script></head><body id=top><script>(function(){let e,t=new RegExp("(^| )change-themes=([^;]*)(;|$)");(e=document.cookie.match(t))||((new Date).getHours()>=19||(new Date).getHours()<6?(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark")):(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")))})(),localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.thend03.com/ accesskey=h title="fayy&amp;fc (Alt + H)"><img src=https://blog.thend03.com/img/logo.jpg alt=logo aria-label=logo height=35>fayy&amp;fc</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://blog.thend03.com/search title="ğŸ” æœç´¢ (Alt + /)" accesskey=/><span>ğŸ” æœç´¢</span></a></li><li><a href=https://blog.thend03.com/ title="ğŸ  ä¸»é¡µ"><span>ğŸ  ä¸»é¡µ</span></a></li><li><a href=https://blog.thend03.com/archives/ title="â±ï¸ å½’æ¡£"><span>â±ï¸ å½’æ¡£</span></a></li><li><a href=https://blog.thend03.com/tags title="ğŸ§© æ ‡ç­¾"><span>ğŸ§© æ ‡ç­¾</span></a></li><li><a href=https://blog.thend03.com/about title="ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº"><span>ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº</span></a></li><li><a href=https://blog.thend03.com/links title="ğŸ¤ å‹é“¾"><span>ğŸ¤ å‹é“¾</span></a></li></ul></nav></header><main class="main page"><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}</style><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://blog.thend03.com/>ğŸ  ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://blog.thend03.com/posts/>ğŸ“šæ–‡ç« </a></div><h1 class=post-title>å¦‚ä½•åšä¸€ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª</h1><div class=post-description>ä»0åˆ°1åš1ä¸ªå°æŠ¥ç«¥åˆ†é”€å¯¼èˆª</div><div class=post-meta><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}.parent-post-meta{display:flex;flex-wrap:wrap;opacity:.8}</style><span class=parent-post-meta><span id=post_meta_style_1><span class="fa fa-calendar-check-o"></span>
<span>2024-07-21
&nbsp;&nbsp;
</span></span><span id=post_meta_style_3><span class="fa fa-file-word-o"></span>
<span>4734å­—
&nbsp;&nbsp;
</span></span><span id=post_meta_style_4><span class="fa fa-clock-o"></span>
<span>10åˆ†é’Ÿ
&nbsp;&nbsp;
</span></span><span id=post_meta_style_5><span class="fa fa-user-o"></span>
<span>since
&nbsp;&nbsp;
</span></span><span id=post_meta_style_6><span class="fa fa-tags" style=opacity:.8></span>
<span><span class=post-tags-meta><a href=https://blog.thend03.com/tags/xiaobot/ style=color:var(--secondary)!important>Xiaobot</a>
&nbsp;<a href=https://blog.thend03.com/tags/spider/ style=color:var(--secondary)!important>Spider</a>
&nbsp;<a href=https://blog.thend03.com/tags/nav/ style=color:var(--secondary)!important>Nav</a>
</span></span></span></span><span style=opacity:.8><span id=post_meta_style_7>&nbsp;&nbsp;
<span class="fa fa-eye"></span>
<span><span id=busuanzi_container_page_pv><span id=busuanzi_value_page_pv></span></span>
&nbsp;&nbsp;
</span></span><span id=post_meta_style_8><span class="fa fa-commenting-o"></span>
<span><script src=https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js></script><script>let url=document.documentURI,dnsUrl="https://blog.thend03.com/",urlSplit=url.split(dnsUrl),finalUrl=urlSplit[1];finalUrl[0]!=="/"&&(finalUrl="/"+finalUrl),twikoo.getCommentsCount({envId:null,region:null,urls:[finalUrl],includeReply:!1}).then(function(e){let t=e[0].count;const n=document.getElementById("comment_count");n.innerText=t}).catch(function(e){console.error(e)})</script><span id=comment_count></span></span></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#0x0 aria-label=0x0>0x0</a></li><li><a href=#%e5%b0%8f%e6%8a%a5%e7%ab%a5%e7%ae%80%e4%bb%8b aria-label=å°æŠ¥ç«¥ç®€ä»‹>å°æŠ¥ç«¥ç®€ä»‹</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e6%ba%90 aria-label=æ•°æ®æº>æ•°æ®æº</a><ul><li><a href=#%e5%b0%8f%e6%8a%a5%e7%ab%a5%e7%b2%be%e9%80%89 aria-label=å°æŠ¥ç«¥ç²¾é€‰>å°æŠ¥ç«¥ç²¾é€‰</a></li><li><a href=#pyq aria-label=pyq>pyq</a></li><li><a href=#%e5%88%ab%e4%ba%ba%e6%95%b4%e7%90%86%e5%a5%bd%e7%9a%84%e4%b8%93%e6%a0%8f%e5%88%97%e8%a1%a8 aria-label=åˆ«äººæ•´ç†å¥½çš„ä¸“æ åˆ—è¡¨>åˆ«äººæ•´ç†å¥½çš„ä¸“æ åˆ—è¡¨</a></li><li><a href=#%e7%88%ac%e5%bd%93%e5%89%8d%e5%b7%b2%e6%9c%89%e7%9a%84%e5%af%bc%e8%88%aa%e7%ab%99%e7%9a%84%e6%95%b0%e6%8d%ae aria-label=çˆ¬å½“å‰å·²æœ‰çš„å¯¼èˆªç«™çš„æ•°æ®>çˆ¬å½“å‰å·²æœ‰çš„å¯¼èˆªç«™çš„æ•°æ®</a></li></ul></li><li><a href=#%e6%95%b0%e6%8d%ae%e6%ba%90%e7%9a%84%e9%80%89%e6%8b%a9 aria-label=æ•°æ®æºçš„é€‰æ‹©>æ•°æ®æºçš„é€‰æ‹©</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e6%95%b4%e7%90%86%e5%88%86%e7%b1%bb aria-label=æ•°æ®æ•´ç†åˆ†ç±»>æ•°æ®æ•´ç†åˆ†ç±»</a><ul><li><a href=#%e5%a6%82%e4%bd%95%e6%8b%bf%e5%88%b0%e4%b8%93%e6%a0%8f%e6%8e%a8%e8%8d%90%e5%88%97%e8%a1%a8 aria-label=å¦‚ä½•æ‹¿åˆ°ä¸“æ æ¨èåˆ—è¡¨>å¦‚ä½•æ‹¿åˆ°ä¸“æ æ¨èåˆ—è¡¨</a></li><li><a href=#%e5%a6%82%e4%bd%95%e6%8b%bf%e5%88%b0%e4%b8%93%e6%a0%8f%e5%9c%b0%e5%9d%80 aria-label=å¦‚ä½•æ‹¿åˆ°ä¸“æ åœ°å€>å¦‚ä½•æ‹¿åˆ°ä¸“æ åœ°å€</a></li><li><a href=#%e5%a6%82%e4%bd%95%e8%8e%b7%e5%8f%96%e4%b8%93%e6%a0%8f%e7%9a%84%e8%af%a6%e6%83%85 aria-label=å¦‚ä½•è·å–ä¸“æ çš„è¯¦æƒ…>å¦‚ä½•è·å–ä¸“æ çš„è¯¦æƒ…</a></li></ul></li><li><a href=#%e5%89%8d%e7%ab%af%e9%a1%b5%e9%9d%a2%e5%b1%95%e7%a4%ba aria-label=å‰ç«¯é¡µé¢å±•ç¤º>å‰ç«¯é¡µé¢å±•ç¤º</a></li><li><a href=#%e6%80%bb%e7%bb%93 aria-label=æ€»ç»“>æ€»ç»“</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{elements&&(activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")}))},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>å°æŠ¥ç«¥ç²¾é€‰å¯¼èˆªç«™æˆæœå±•ç¤º: <a href=https://re.gloaming.top/>https://re.gloaming.top/</a></p><h1 id=0x0>0x0<a hidden class=anchor aria-hidden=true href=#0x0>#</a></h1><p>å¯¼èˆªç«™çš„è¯¦ç»†å®æ“ï¼Œè®²äº†ä¸“æ æ¥æºçš„é€‰æ‹©ï¼Œå¦‚ä½•æ•´ç†è·å–ä¸“æ åˆ—è¡¨è¯¦æƒ…ï¼Œå‰ç«¯æ ·å¼æ€ä¹ˆåšï¼Œå¦‚ä½•éƒ¨ç½²å¹¶ç”Ÿæˆæœ€ç»ˆçš„å¯¼èˆªç«™ç­‰ã€‚</p><p>ç”±äºå‰ç«¯èƒ½åŠ›å®åœ¨æœ‰é™ï¼Œæ‰€ä»¥æœ¬ç¯‡æ–‡ç« çš„é‡ç‚¹æ˜¯åœ¨å¦‚ä½•è·å–ç²¾é€‰çš„ä¸“æ åˆ—è¡¨ä¸Šã€‚</p><p>å¯¼èˆªç«™ä½¿ç”¨ä¸€ä¸ªå¼€æºé¡¹ç›®æ”¹é€ è€Œæ¥ã€‚</p><h1 id=å°æŠ¥ç«¥ç®€ä»‹>å°æŠ¥ç«¥ç®€ä»‹<a hidden class=anchor aria-hidden=true href=#å°æŠ¥ç«¥ç®€ä»‹>#</a></h1><p><a href=https://xiaobot.net/home.html>å°æŠ¥ç«¥</a>æ˜¯ä¸ªå»ä¸­å¿ƒåŒ–çš„è¯¾ç¨‹å¹³å°ã€‚</p><blockquote><p>åˆ›ä½œè€…å¯ä»¥åœ¨å°æŠ¥ç«¥ä½“é¢è€Œç”¨å¿ƒçš„åˆ›ä½œï¼Œä¸“æ³¨åˆ›ä½œï¼Œä¸æå¥—è·¯ã€‚</p><p>è€Œä¸”ä¸“æ çš„ä»·æ ¼å¤§éƒ¨åˆ†éƒ½æ¯”è¾ƒä¾¿å®œã€‚</p><p>å°æŠ¥ç«¥å®˜æ–¹ä¸åšç¤¾ç¾¤ï¼Œä¸åšå¹¿å‘Šå˜ç°ï¼Œä¸åšç®—æ³•æ¨èã€‚</p></blockquote><p>å› ä¸ºå°æŠ¥ç«¥æ˜¯å»ä¸­å¿ƒåŒ–çš„ï¼Œæ‰€ä»¥å®˜ç½‘æ²¡æœ‰æ‰€æœ‰çš„ä¸“æ åˆ—è¡¨ï¼Œåªèƒ½é€šè¿‡ä¸“æ ä½œè€…è‡ªå‘æ€§çš„ä¼ æ’­ï¼Œæˆ–è€…å°æŠ¥ç«¥å®˜æ–¹çš„æ¨èæ‰èƒ½æ‰¾åˆ°ä¸“æ åœ°å€ã€‚</p><p>æ‰€ä»¥æœ‰äººå°±åšäº†å°æŠ¥ç«¥çš„å¯¼èˆªç«™ï¼Œç”¨æ¥æ¨èä¸“æ ã€‚</p><p>è€Œä¸”å°æŠ¥ç«¥è¿™ä¸ªä¸éœ€è¦ä¹°ä¸“æ ï¼Œå°±å¯ä»¥è·å¾—åˆ†é”€é“¾æ¥ã€‚æ‰€ä»¥ç†è®ºä¸Šå°æŠ¥ç«¥çš„æ‰€æœ‰ä¸“æ éƒ½å¯ä»¥å…è´¹è·å¾—åˆ†é”€é“¾æ¥ã€‚</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407211337712.png alt=image-20240721133751669></p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407211338766.png alt=image-20240721133805735></p><p>å¦å¤–å¤§å£°çš„åæ§½ä¸€ä¸‹ï¼Œè¿™æ ·çš„ä¸“æ éƒ½æ˜¯è°åœ¨ä¹°ã€‚</p><p>åˆ«äººé€šè¿‡ä½ çš„é“¾æ¥ä¹°äº†ä¹‹åï¼Œä½ å°±å¯ä»¥è·å¾—åˆ†é”€æ”¶å…¥ã€‚</p><p>ä½†æ˜¯å§ï¼Œåˆ†é”€ç«™è¿™ä¸ªä¸œè¥¿ï¼Œå¯èƒ½ç¡®å®å¾—æœ‰ç‚¹ç§åŸŸæµé‡æ‰è¡Œï¼Œåœ¨pyqå‘åˆ†é”€çš„äºŒç»´ç ï¼Œæˆ–è€…å…¬ä¼—å·å‘æ–‡ç« ï¼Œæˆ–è€…è‡ªå·±çš„ç¤¾ç¾¤é‡Œå‘ä¸€ä¸‹è¿›è¡Œæ¨èã€‚</p><p>å•çº¯é seoçš„è¯ï¼Œç›®å‰æ’åæ¯”è¾ƒé å‰çš„seoåšçš„éƒ½æŒºå¥½çš„ï¼Œæ–°ç«™æ„Ÿè§‰å¾—åšæŒä¹…åŒ–è¿è¥æœç´¢å¼•æ“æ’åæ‰èƒ½ä¸Šçš„å»ã€‚</p><p>å•æœå°æŠ¥ç«¥ï¼Œå®˜ç½‘å äº†æ•´æ•´ä¸€å±ï¼Œä¸‹é¢çš„å°±æ˜¯ä¸€äº›åˆ†é”€ç«™äº†ã€‚</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407211330954.png alt=image-20240721133054830></p><p>å›åˆ°åˆ†é”€ç«™ï¼Œè¯¥å¦‚ä½•ä»01åˆ°1åšä¸€ä¸ªåˆ†é”€ç«™å‡ºæ¥ã€‚</p><p>æˆ‘åŠªåŠ›æœç´¢ï¼Œéƒ½æ²¡æœ‰æœç´¢å‡ºä¸€ä¸ªå¯ç”¨çš„åˆ†é”€å¯¼èˆªæ¨¡æ¿å‡ºæ¥ï¼Œæœ‰ç‚¹ç‚¹éš¾ã€‚</p><h1 id=æ•°æ®æº>æ•°æ®æº<a hidden class=anchor aria-hidden=true href=#æ•°æ®æº>#</a></h1><p>åšå¯¼èˆªç«™é¦–å…ˆè¦æ‹¿åˆ°æ•°æ®ï¼Œç”±äºå°æŠ¥ç«¥çš„ç‰¹æ®Šæ€§(å»ä¸­å¿ƒåŒ–)ï¼Œæ‰€ä»¥æ²¡æ³•ä»å®˜ç½‘å¾—åˆ°æ‰€æœ‰ä¸“æ çš„æ•°æ®ã€‚</p><p>é‚£ä¹ˆå¯ä»¥é€‰æ‹©ä»ä»¥ä¸‹çš„å‡ ç§æ¸ é“æ‹¿åˆ°æ•°æ®</p><ul><li>å°æŠ¥ç«¥ç²¾é€‰å…¬ä¼—å·ï¼Œé‡Œé¢ä¼šæœ‰ä¸€äº›ç²¾é€‰ä¸“æ çš„æ¨èã€‚</li><li>pyqå„ç§æ•£è½çš„ä¸“æ æ¨è</li><li>åˆ«äººæ•´ç†å¥½çš„ä¸“æ åˆ—è¡¨</li><li>çˆ¬å½“å‰å·²æœ‰çš„å°æŠ¥ç«¥å¯¼èˆªç«™çš„æ•°æ®</li></ul><h2 id=å°æŠ¥ç«¥ç²¾é€‰>å°æŠ¥ç«¥ç²¾é€‰<a hidden class=anchor aria-hidden=true href=#å°æŠ¥ç«¥ç²¾é€‰>#</a></h2><p>å°æŠ¥ç«¥ç²¾é€‰æ˜¯å°æŠ¥ç«¥å®˜æ–¹çš„å…¬ä¼—å·ã€‚</p><p>è™½ç„¶æ˜¯å»ä¸­å¿ƒåŒ–ï¼Œä½†æ˜¯ä¸€ç‚¹å…¥å£éƒ½çœ‹ä¸åˆ°ï¼Œä¸“æ çš„æ¨å¹¿ç¡®å®æ˜¯ä¼šå—é˜»ã€‚</p><p>æ‰€ä»¥æœ‰äº†å°æŠ¥ç«¥ç²¾é€‰è¿™ä¸ªäº‹ã€‚</p><p>ç²¾é€‰æ–‡ç« æ¯æœŸä¼šæ¨èä¸€äº›æœ‰ä»·å€¼çš„ä¸“æ ã€‚æ‰€ä»¥ç²¾é€‰æ˜¯ä¸ªè·å–ä¸“æ åˆ—è¡¨çš„è·¯å­ã€‚ä½†æ˜¯ç²¾é€‰åªèƒ½æ‹¿åˆ°ä¸€éƒ¨åˆ†çš„ä¸“æ ã€‚</p><h2 id=pyq>pyq<a hidden class=anchor aria-hidden=true href=#pyq>#</a></h2><p>pyqåŠ çš„ä¸€äº›äººï¼Œä¼šå»æ¨èä¸“æ ï¼Œä»–ä»¬ä¹°äº†ä¹‹åï¼Œä¼šå‘ä»–ä»¬è‡ªå·±çš„ä¸“å±åˆ†é”€æµ·æŠ¥ã€‚</p><p>æœ‰æ—¶å€™æˆ‘ä¹Ÿä¼šå»é€šè¿‡ä»–ä»¬çš„é“¾æ¥ä¹°ä¸€ç‚¹ï¼Œä½†æ˜¯è¿™ç§å°±æ˜¯éšç¼˜ï¼Œæ•°é‡ä¹Ÿä¸ä¼šå¤ªå¤šã€‚</p><h2 id=åˆ«äººæ•´ç†å¥½çš„ä¸“æ åˆ—è¡¨>åˆ«äººæ•´ç†å¥½çš„ä¸“æ åˆ—è¡¨<a hidden class=anchor aria-hidden=true href=#åˆ«äººæ•´ç†å¥½çš„ä¸“æ åˆ—è¡¨>#</a></h2><p>æˆ‘åœ¨ç½‘ä¸Šå†²æµªçš„æ—¶å€™ï¼Œå‘ç°äº†åˆ«äººæœ‰ä¸€ä»½æ•´ç†å¥½çš„ä¸“æ åˆ—è¡¨ï¼Œä½†æ˜¯è¿™ä¸ªå¯èƒ½ä¼šæœ‰æ—¶æ•ˆæ€§çš„é—®é¢˜ï¼Œä½œè€…æ›´æ–°ä¸åŠæ—¶ï¼Œå°±æ‹¿ä¸åˆ°å¢é‡çš„ä¸“æ åˆ—è¡¨ã€‚</p><p>ä¸‹é¢è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ°‘é—´çš„ç‰ˆæœ¬ï¼Œä¸Šæ¬¡æ›´æ–°è¿˜æ˜¯åœ¨2å¹´å‰ã€‚</p><p><a href="https://github.com/qianguyihao/xiaobot-list?tab=readme-ov-file">https://github.com/qianguyihao/xiaobot-list?tab=readme-ov-file</a></p><h2 id=çˆ¬å½“å‰å·²æœ‰çš„å¯¼èˆªç«™çš„æ•°æ®>çˆ¬å½“å‰å·²æœ‰çš„å¯¼èˆªç«™çš„æ•°æ®<a hidden class=anchor aria-hidden=true href=#çˆ¬å½“å‰å·²æœ‰çš„å¯¼èˆªç«™çš„æ•°æ®>#</a></h2><p>è¿™æ¡è·¯æˆ‘æ„Ÿè§‰æ˜¯æœ€å¥½çš„ï¼Œå¤šé€‰å‡ ä¸ªå¯¼èˆªç«™ï¼ŒæŠŠä»–ä»¬çš„ä¸“æ åˆ—è¡¨éƒ½çˆ¬ä¸€éï¼Œç„¶åå»ä¸ªé‡ï¼Œå°±å¾—åˆ°äº†æœ€æ–°æœ€å…¨çš„ä¸“æ åˆ—è¡¨äº†ã€‚</p><h1 id=æ•°æ®æºçš„é€‰æ‹©>æ•°æ®æºçš„é€‰æ‹©<a hidden class=anchor aria-hidden=true href=#æ•°æ®æºçš„é€‰æ‹©>#</a></h1><p>ä¸Šé¢ä»‹ç»äº†å‡ ç§æ•°æ®æ¥æºï¼Œæˆ‘è¿™è¾¹é€‰æ‹©çš„æ˜¯çˆ¬å°æŠ¥ç«¥ç²¾é€‰çš„æ¨èåˆ—è¡¨ã€‚å…¶å®æ›´å¥½çš„æ˜¯å»çˆ¬å·²æœ‰å¯¼èˆªç«™çš„æ•°æ®ã€‚</p><p>ä¸è¿‡å°±ç²¾é€‰ä¸“æ è€Œè¨€ï¼Œå®˜æ–¹çš„å…¶å®æ›´å¥½ï¼Œæ¯•ç«Ÿå®˜æ–¹å·²ç»åšè¿‡ä¸€è½®ç­›é€‰äº†ï¼Œèƒ½ä¸Šæ¨èçš„è‚¯å®šæœ‰å…¶ä¼˜ç‚¹ã€‚</p><h1 id=æ•°æ®æ•´ç†åˆ†ç±»>æ•°æ®æ•´ç†åˆ†ç±»<a hidden class=anchor aria-hidden=true href=#æ•°æ®æ•´ç†åˆ†ç±»>#</a></h1><p>é€‰æ‹©å¥½ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦å¯¹æ¨èåˆ—è¡¨è¿›è¡Œåˆ†ç±»ï¼Œè®¢é˜…å·é‡Œæœ‰ç›®å‰æ‰€æœ‰çš„ä¸“æ æ¨èåˆ—è¡¨ã€‚æˆªæ­¢åˆ°ç°åœ¨ä¸€å…±æœ‰26æœŸã€‚</p><p>é‚£ä¹ˆå¯¹æ¨èåˆ—è¡¨è¿›è¡Œæ•´ç†å°±æœ‰2ç§æ–¹æ³•ã€‚</p><ul><li>äººå·¥æ•´ç†</li><li>çˆ¬è™«åˆ†ç±»</li></ul><p>26æœŸçš„è¯ï¼Œç‚¹å¼€26æ¡å…¬ä¼—å·æ–‡ç« ï¼Œæ”¶é›†ä¸‹æ‰€æœ‰çš„æ¨èä¸“æ çš„äºŒç»´ç ï¼Œå€’ä¹Ÿè¿˜å¥½ã€‚</p><p>ä½†æ˜¯ä½œä¸ºä¸€ä¸ªèµ„æ·±crud boyï¼Œèƒ½å†™ä»£ç å°±å†™ä»£ç ã€‚ä¸èƒ½å†™ä»£ç ï¼Œå°±è®©chatgptå¸®æˆ‘ä»¬å†™ä»£ç ã€‚</p><p>è¯­è¨€é€‰æ‹©çš„æ˜¯Java(èµ„æ·±java crudä»”)ã€‚</p><p>é€‰æ‹©çš„æ¡†æ¶æœ‰å¦‚ä¸‹å‡ ä¸ª</p><ul><li>Jsoup, ç”¨äºè§£æhtml</li><li>Fastjson2ï¼Œç”¨äºå­—ç¬¦ä¸²è½¬jsonå¤„ç†</li><li>Hutoolï¼Œhttp&äºŒç»´ç è¯†åˆ«</li><li>selenium, ç”¨äºæµè§ˆå™¨æ¨¡æ‹Ÿï¼Œä¸€äº›å¼‚æ­¥åŠ è½½çš„é¡µé¢éœ€è¦ç”¨åˆ°è¿™ä¸ª</li><li>commons-ioï¼Œæ–‡ä»¶æ“ä½œ</li></ul><p>ä¸‹é¢å°±æ˜¯å®æ“äº†</p><h2 id=å¦‚ä½•æ‹¿åˆ°ä¸“æ æ¨èåˆ—è¡¨>å¦‚ä½•æ‹¿åˆ°ä¸“æ æ¨èåˆ—è¡¨<a hidden class=anchor aria-hidden=true href=#å¦‚ä½•æ‹¿åˆ°ä¸“æ æ¨èåˆ—è¡¨>#</a></h2><p>é¦–å…ˆæ˜¯è¿›å…¥å°æŠ¥ç«¥ç²¾é€‰ å…¬ä¼—å·çš„èŠå¤©é¡µé¢ï¼Œå·¦ä¸‹è§’æœ‰ä¸ªå¾€æœŸå›é¡¾ï¼Œè¿™é‡Œå°±æ˜¯æ¨èä¸“æ çš„åˆé›†é¡µé¢ã€‚</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407211448481.png alt=image-20240721144801453></p><p>ç„¶åç‚¹å‡»å³ä¸Šè§’ï¼Œé€‰æ‹©å¤åˆ¶é“¾æ¥ï¼Œæˆ–è€…é€‰æ‹©ä½¿ç”¨é»˜è®¤æµè§ˆå™¨æ‰“å¼€ï¼Œå°±å¯ä»¥æ‹¿åˆ°è®¢é˜…åˆ—è¡¨çš„url</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407211448061.png alt=image-20240721144817021></p><p>ä¸‹é¢å°±æ˜¯é¡µé¢åˆ†æäº†ï¼Œé€šè¿‡æ»‘åŠ¨é¡µé¢çŒœæµ‹è¿™ä¸ªåˆ—è¡¨æ˜¯åˆ†é¡µåŠ è½½çš„ã€‚</p><p>å¯ä»¥åœ¨æ§åˆ¶å°çœ‹ç½‘ç»œè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥çœ‹çš„å‡ºæ¥ã€‚</p><p>uriä¸­æœ‰ä¸€ä¸ªå…³é”®çš„keyï¼Œappmsgalbumï¼Œ è¿™ä¸ªçœ‹ç€åƒæ˜¯åˆ—è¡¨çš„è¯·æ±‚ã€‚ç»è¿‡æµ‹éªŒï¼Œè¿™ä¸ªç¡®å®æ˜¯åˆ†é¡µå‚æ•°ã€‚</p><p>æµè§ˆå™¨åœ°å€æ çš„é“¾æ¥è®¿é—®åªèƒ½è®¿é—®åˆ°ç¬¬ä¸€é¡µçš„é¡µé¢ã€‚ä¸‹é¢å°±è¦é åˆ†é¡µæŸ¥è¯¢æ‹¿æ•°æ®äº†ã€‚</p><p>ä¸‹é¢çš„åˆ†é¡µè¯·æ±‚è¿”å›çš„æ˜¯jsonæ•°æ®ï¼Œç¬¬ä¸€é¡µæ˜¯htmlæ•°æ®ã€‚</p><p>åˆ†é¡µå‚æ•°æœ‰2ä¸ªæ¯”è¾ƒå…³é”®çš„keyï¼Œbegin_msgidå’Œbegin_itemidxï¼Œè¿™ä¸ªä¸€ä¸ªæ˜¯åˆ†é¡µå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æ¶ˆæ¯idï¼Œä¼ å…¥é¡µæ•°å’Œidï¼ŒæŸ¥è¯¢ä¸‹é¢çš„æ¶ˆæ¯</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407211502190.png alt=image-20240721150209139></p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407211523946.png alt=image-20240721152306897></p><p>è¿™æ ·çš„è¯å°±å¯ä»¥æ‹¿åˆ°æ‰€æœ‰çš„æ¨èæ–‡ç« çš„è¯¦ç»†é“¾æ¥äº†ã€‚æ¯ä¸€ç¯‡æ–‡ç« æœ‰ä¸€ä¸ªä¸“é¢˜æ¨èï¼ŒåŒ…å«æ•°ä¸ªä¸“æ çš„æ¨è</p><p>ç»è¿‡é¡µé¢å…ƒç´ å®¡æŸ¥ä»¥åŠdebugï¼Œå¾—åˆ°äº†å¦‚ä¸‹è·å–è®¢é˜…åˆ—è¡¨æ¯ç¯‡æ–‡ç« åœ°å€çš„æ–¹æ³•</p><p>å¸¸é‡ç±»å¦‚ä¸‹</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Constants</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String XIAOBOT_WECHAT_SUBSCRIBE_LIST_URL <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;__biz=Mzg4MTc0MDcyOA==&amp;scene=1&amp;album_id=2262723582487429130&amp;count=100&amp;uin=&amp;key=&amp;devicetype=iMac+MacBookPro18%2C1+OSX+OSX+14.5+build(23F79)&amp;version=13080811&amp;lang=zh_CN&amp;nettype=WIFI&amp;ascene=0&amp;fontScale=100&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String LOCAL_CHROME_DRIVER_PATH <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/Users/since/Downloads/chromedriver-mac-arm64/chromedriver&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String LIST_NEXT_URL_FORMAT <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;__biz=Mzg4MTc0MDcyOA==&amp;album_id=2262723582487429130&amp;count=100&amp;begin_msgid=%s&amp;begin_itemidx=%s&amp;uin=&amp;key=&amp;pass_ticket=&amp;wxtoken=&amp;devicetype=iMac&amp;nbsp;MacBookPro18,1&amp;nbsp;OSX&amp;nbsp;OSX&amp;nbsp;14.5&amp;nbsp;build(23F79)&amp;clientversion=13080811&amp;__biz=Mzg4MTc0MDcyOA==&amp;appmsg_token=&amp;x5=0&amp;f=json&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è·å–è®¢é˜…åˆ—è¡¨æ–¹æ³•</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> cn.hutool.http.HttpUtil;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.alibaba.fastjson2.JSON;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.alibaba.fastjson2.JSONArray;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.alibaba.fastjson2.JSONObject;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.thend03.xiaobot.spider.constants.Constants;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.thend03.xiaobot.spider.model.ArticleDetail;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.thend03.xiaobot.spider.model.WechatModel;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.commons.collections4.CollectionUtils;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.apache.commons.lang3.StringUtils;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.jsoup.Jsoup;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.jsoup.nodes.Attributes;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.jsoup.nodes.Document;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.jsoup.nodes.Element;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.jsoup.select.Elements;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.net.MalformedURLException;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.nio.charset.StandardCharsets;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.ArrayList;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.List;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Objects;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.stream.Collectors;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * å°æŠ¥ç«¥ä¸“æ ç²¾é€‰è®¢é˜…å·åˆ—è¡¨è§£ææœåŠ¡
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author since
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @date 2024-07-17 08:12
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>WechatSubscribeListService</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> List<span style=color:#f92672>&lt;</span>ArticleDetail<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>parseArticleList</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String content <span style=color:#f92672>=</span> HttpUtil.<span style=color:#a6e22e>downloadString</span>(Constants.<span style=color:#a6e22e>XIAOBOT_WECHAT_SUBSCRIBE_LIST_URL</span>, StandardCharsets.<span style=color:#a6e22e>UTF_8</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Document parse <span style=color:#f92672>=</span> Jsoup.<span style=color:#a6e22e>parse</span>(content);
</span></span><span style=display:flex><span>        Elements albumListItem <span style=color:#f92672>=</span> parse.<span style=color:#a6e22e>getElementsByClass</span>(<span style=color:#e6db74>&#34;album__list-item&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(1);
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>WechatModel<span style=color:#f92672>&gt;</span> list <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>boolean</span> hasNext <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Element element : albumListItem) {
</span></span><span style=display:flex><span>            Attributes attributes <span style=color:#f92672>=</span> element.<span style=color:#a6e22e>attributes</span>();
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(2);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (attributes.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            String s <span style=color:#f92672>=</span> attributes.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;data-msgid&#34;</span>);
</span></span><span style=display:flex><span>            String s1 <span style=color:#f92672>=</span> attributes.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;data-itemidx&#34;</span>);
</span></span><span style=display:flex><span>            String s2 <span style=color:#f92672>=</span> attributes.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;data-link&#34;</span>);
</span></span><span style=display:flex><span>            String s3 <span style=color:#f92672>=</span> attributes.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;data-title&#34;</span>);
</span></span><span style=display:flex><span>            String s4 <span style=color:#f92672>=</span> attributes.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;data-pos_num&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            WechatModel wechatModel <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> WechatModel();
</span></span><span style=display:flex><span>            wechatModel.<span style=color:#a6e22e>setDataMsgId</span>(parseLong(s));
</span></span><span style=display:flex><span>            wechatModel.<span style=color:#a6e22e>setDataItemIndex</span>(parseInt(s1));
</span></span><span style=display:flex><span>            wechatModel.<span style=color:#a6e22e>setDataLink</span>(s2);
</span></span><span style=display:flex><span>            wechatModel.<span style=color:#a6e22e>setDataTitle</span>(s3);
</span></span><span style=display:flex><span>            wechatModel.<span style=color:#a6e22e>setDataPosNum</span>(parseInt(s4));
</span></span><span style=display:flex><span>            list.<span style=color:#a6e22e>add</span>(wechatModel);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (wechatModel.<span style=color:#a6e22e>getDataPosNum</span>() <span style=color:#f92672>==</span> 1) {
</span></span><span style=display:flex><span>                hasNext <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (hasNext) {
</span></span><span style=display:flex><span>            List<span style=color:#f92672>&lt;</span>WechatModel<span style=color:#f92672>&gt;</span> list1 <span style=color:#f92672>=</span> nextParse(list.<span style=color:#a6e22e>get</span>(list.<span style=color:#a6e22e>size</span>() <span style=color:#f92672>-</span> 1));
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (CollectionUtils.<span style=color:#a6e22e>isNotEmpty</span>(list1)) {
</span></span><span style=display:flex><span>                list.<span style=color:#a6e22e>addAll</span>(list1);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (list1.<span style=color:#a6e22e>get</span>(list1.<span style=color:#a6e22e>size</span>() <span style=color:#f92672>-</span> 1).<span style=color:#a6e22e>getDataPosNum</span>() <span style=color:#f92672>==</span> 1) {
</span></span><span style=display:flex><span>                hasNext <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> urlList <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        list.<span style=color:#a6e22e>stream</span>().<span style=color:#a6e22e>filter</span>(Objects::nonNull).<span style=color:#a6e22e>forEach</span>(s <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>            List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> urlList1 <span style=color:#f92672>=</span> WechatDetailService.<span style=color:#a6e22e>getUrlList</span>(s.<span style=color:#a6e22e>getDataLink</span>());
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (CollectionUtils.<span style=color:#a6e22e>isNotEmpty</span>(urlList1)) {
</span></span><span style=display:flex><span>                urlList.<span style=color:#a6e22e>addAll</span>(urlList1);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> collect <span style=color:#f92672>=</span> urlList.<span style=color:#a6e22e>stream</span>().<span style=color:#a6e22e>filter</span>(StringUtils::isNotBlank).<span style=color:#a6e22e>filter</span>(s <span style=color:#f92672>-&gt;</span> s.<span style=color:#a6e22e>contains</span>(<span style=color:#e6db74>&#34;http&#34;</span>) <span style=color:#f92672>&amp;&amp;</span> s.<span style=color:#a6e22e>contains</span>(<span style=color:#e6db74>&#34;xiaobot.net/p&#34;</span>)).<span style=color:#a6e22e>map</span>(s <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>            String<span style=color:#f92672>[]</span> split <span style=color:#f92672>=</span> s.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#34;\\?&#34;</span>);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> split<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>        }).<span style=color:#a6e22e>distinct</span>().<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>());
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>ArticleDetail<span style=color:#f92672>&gt;</span> collect1 <span style=color:#f92672>=</span> collect.<span style=color:#a6e22e>stream</span>().<span style=color:#a6e22e>filter</span>(Objects::nonNull).<span style=color:#a6e22e>map</span>(url <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>            String host <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>            String uniqueId <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>                host <span style=color:#f92672>=</span> WechatDetailService.<span style=color:#a6e22e>getHost</span>(url);
</span></span><span style=display:flex><span>            } <span style=color:#66d9ef>catch</span> (MalformedURLException e) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>                uniqueId <span style=color:#f92672>=</span> WechatDetailService.<span style=color:#a6e22e>getArticleUniqueId</span>(url);
</span></span><span style=display:flex><span>            } <span style=color:#66d9ef>catch</span> (MalformedURLException e) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException(e);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> WechatDetailService.<span style=color:#a6e22e>getArticleDetail</span>(host, uniqueId);
</span></span><span style=display:flex><span>        }).<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>());
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> collect1;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>long</span> <span style=color:#a6e22e>parseLong</span>(String dataMsgId) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Long.<span style=color:#a6e22e>parseLong</span>(dataMsgId);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (Exception e) {
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span>1;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>parseInt</span>(String itemIndex) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Integer.<span style=color:#a6e22e>parseInt</span>(itemIndex);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (Exception e) {
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>-</span>1;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> List<span style=color:#f92672>&lt;</span>WechatModel<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>nextParse</span>(WechatModel wechatModel) {
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>WechatModel<span style=color:#f92672>&gt;</span> list <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        String format <span style=color:#f92672>=</span> String.<span style=color:#a6e22e>format</span>(Constants.<span style=color:#a6e22e>LIST_NEXT_URL_FORMAT</span>, wechatModel.<span style=color:#a6e22e>getDataMsgId</span>(), wechatModel.<span style=color:#a6e22e>getDataItemIndex</span>());
</span></span><span style=display:flex><span>        String content <span style=color:#f92672>=</span> HttpUtil.<span style=color:#a6e22e>downloadString</span>(format, StandardCharsets.<span style=color:#a6e22e>UTF_8</span>);
</span></span><span style=display:flex><span>        JSONObject jsonObject <span style=color:#f92672>=</span> JSON.<span style=color:#a6e22e>parseObject</span>(content);
</span></span><span style=display:flex><span>        JSONObject getalbumResp <span style=color:#f92672>=</span> jsonObject.<span style=color:#a6e22e>getJSONObject</span>(<span style=color:#e6db74>&#34;getalbum_resp&#34;</span>);
</span></span><span style=display:flex><span>        JSONArray articleList <span style=color:#f92672>=</span> getalbumResp.<span style=color:#a6e22e>getJSONArray</span>(<span style=color:#e6db74>&#34;article_list&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> articleList.<span style=color:#a6e22e>size</span>(); i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            Object o <span style=color:#f92672>=</span> articleList.<span style=color:#a6e22e>get</span>(i);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (o <span style=color:#66d9ef>instanceof</span> JSONObject) {
</span></span><span style=display:flex><span>                JSONObject json <span style=color:#f92672>=</span> (JSONObject) o;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>long</span> msgid <span style=color:#f92672>=</span> json.<span style=color:#a6e22e>getLongValue</span>(<span style=color:#e6db74>&#34;msgid&#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>int</span> itemidx <span style=color:#f92672>=</span> json.<span style=color:#a6e22e>getIntValue</span>(<span style=color:#e6db74>&#34;itemidx&#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>int</span> posNum <span style=color:#f92672>=</span> json.<span style=color:#a6e22e>getIntValue</span>(<span style=color:#e6db74>&#34;pos_num&#34;</span>);
</span></span><span style=display:flex><span>                String title <span style=color:#f92672>=</span> json.<span style=color:#a6e22e>getString</span>(<span style=color:#e6db74>&#34;title&#34;</span>);
</span></span><span style=display:flex><span>                String link <span style=color:#f92672>=</span> json.<span style=color:#a6e22e>getString</span>(<span style=color:#e6db74>&#34;url&#34;</span>);
</span></span><span style=display:flex><span>                WechatModel nextWechatModel <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> WechatModel();
</span></span><span style=display:flex><span>                nextWechatModel.<span style=color:#a6e22e>setDataMsgId</span>(msgid);
</span></span><span style=display:flex><span>                nextWechatModel.<span style=color:#a6e22e>setDataItemIndex</span>(itemidx);
</span></span><span style=display:flex><span>                nextWechatModel.<span style=color:#a6e22e>setDataLink</span>(link);
</span></span><span style=display:flex><span>                nextWechatModel.<span style=color:#a6e22e>setDataTitle</span>(title);
</span></span><span style=display:flex><span>                nextWechatModel.<span style=color:#a6e22e>setDataPosNum</span>(posNum);
</span></span><span style=display:flex><span>                list.<span style=color:#a6e22e>add</span>(nextWechatModel);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> list;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=å¦‚ä½•æ‹¿åˆ°ä¸“æ åœ°å€>å¦‚ä½•æ‹¿åˆ°ä¸“æ åœ°å€<a hidden class=anchor aria-hidden=true href=#å¦‚ä½•æ‹¿åˆ°ä¸“æ åœ°å€>#</a></h2><p>åœ¨ä¸Šä¸€æ­¥ æˆ‘ä»¬æ‹¿åˆ°äº†26ç¯‡ç²¾é€‰æ¨èçš„æ–‡ç« åœ°å€åˆ—è¡¨ï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬éœ€è¦è§£ææ¯ä¸€ç¯‡æ–‡ç« è¯¦æƒ…ï¼Œæ‹¿åˆ°è¿™ä¸€æ‰¹æ¨èçš„ä¸“æ åˆé›†ã€‚</p><p>æ¯ä¸€ç¯‡æ–‡ç« é‡Œéƒ½ä¼šæ¨è1~Nç¯‡æ–‡ç« ï¼Œæ•°é‡ä¸ç­‰ã€‚</p><p>æˆ‘æ‹¿å‡ ç¯‡æ–‡ç« åˆ†æäº†ä¸€ä¸‹ï¼Œæ¯ç¯‡æ–‡ç« çš„ä¸“æ æ²¡æœ‰ç‰¹å®šçš„æ ‡ç­¾ï¼Œä½†æ˜¯ç”±äºæ˜¯å…¬ä¼—å·æ–‡ç« ï¼Œæ‰€ä»¥ä¸“æ éƒ½æ˜¯ä»¥å›¾ç‰‡äºŒç»´ç çš„å½¢å¼æä¾›çš„ã€‚</p><p>å³èƒ½æ‹¿åˆ°æ‰€æœ‰çš„ä¸“æ äºŒç»´ç å›¾ç‰‡å³å¯ã€‚</p><p>ä»¥<a href="https://mp.weixin.qq.com/s?__biz=Mzg4MTc0MDcyOA==&amp;mid=2247484196&amp;idx=1&amp;sn=7034ef1197b8658d86cef8db1d04f3a9&amp;chksm=cf601df3f81794e5e074a30892c95c54e1b33fcef5cbea7a4590a95f37652e0f890e72265efb&amp;scene=178&amp;cur_album_id=2262723582487429130#rd">åºå·26</a>çš„è¿™ç¯‡æ–‡ç« ä¸ºä¾‹</p><p>æ¨èçš„ä¸“æ ä»¥æ–‡å­—ä»‹ç»+äºŒç»´ç çš„å›¾ç‰‡æ ¼å¼æä¾›å‡ºæ¥ã€‚</p><p>è¿™ç¯‡æ–‡ç« ä¸€å…±æ¨èäº†4ä¸ªä¸“æ ï¼Œç†è®ºä¸Šæˆ‘ä»¬æ‹¿åˆ°è¿™4ä¸ªä¸“æ çš„å›¾ç‰‡äºŒç»´ç å°±å¯ä»¥äº†ã€‚</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407250847107.png alt=image-20240725084710014></p><p>é‚£ä¹ˆæ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œè¿›è¡Œå…ƒç´ å®¡æŸ¥ï¼Œåœ¨imgæ ‡ç­¾é‡Œçš„data-srcå­—æ®µå¯ä»¥æ‹¿åˆ°å›¾ç‰‡åœ°å€</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407250900864.png alt=image-20240725090035806></p><p>ç°åœ¨çš„è·å–å›¾ç‰‡åœ°å€çš„æ–¹æ³•è¿‡äºç”Ÿç¡¬äº†ï¼Œéœ€è¦ä»scripté‡Œè§£æå˜é‡é‡é‡ç¡¬è§£ææ‰èƒ½æ‹¿åˆ°å›¾ç‰‡åœ°å€</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        String content <span style=color:#f92672>=</span> HttpUtil.<span style=color:#a6e22e>downloadString</span>(wechatUrl, StandardCharsets.<span style=color:#a6e22e>UTF_8</span>);
</span></span><span style=display:flex><span>        Document parse <span style=color:#f92672>=</span> Jsoup.<span style=color:#a6e22e>parse</span>(content);
</span></span><span style=display:flex><span>        Elements scripts <span style=color:#f92672>=</span> parse.<span style=color:#a6e22e>getElementsByTag</span>(<span style=color:#e6db74>&#34;script&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Element script : scripts) {
</span></span><span style=display:flex><span>            List<span style=color:#f92672>&lt;</span>Node<span style=color:#f92672>&gt;</span> nodes <span style=color:#f92672>=</span> script.<span style=color:#a6e22e>childNodes</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (Node node : nodes) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (node <span style=color:#66d9ef>instanceof</span> DataNode) {
</span></span><span style=display:flex><span>                    DataNode dataNode <span style=color:#f92672>=</span> (DataNode) node;
</span></span><span style=display:flex><span>                    String wholeData <span style=color:#f92672>=</span> dataNode.<span style=color:#a6e22e>getWholeData</span>();
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> (wholeData.<span style=color:#a6e22e>contains</span>(<span style=color:#e6db74>&#34;cdn_url&#34;</span>)) {
</span></span><span style=display:flex><span>                        String<span style=color:#f92672>[]</span> split <span style=color:#f92672>=</span> wholeData.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#34;var&#34;</span>);
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> split.<span style=color:#a6e22e>length</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>                            String s <span style=color:#f92672>=</span> split<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>                            <span style=color:#66d9ef>if</span> (s.<span style=color:#a6e22e>contains</span>(<span style=color:#e6db74>&#34;picturePageInfoList&#34;</span>) <span style=color:#f92672>&amp;&amp;</span> s.<span style=color:#a6e22e>contains</span>(<span style=color:#e6db74>&#34;http&#34;</span>)) {
</span></span><span style=display:flex><span>                                String<span style=color:#f92672>[]</span> split1 <span style=color:#f92672>=</span> s.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#34;picturePageInfoList&#34;</span>);
</span></span><span style=display:flex><span>                                String cdnUrl <span style=color:#f92672>=</span> split1<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>                                String s1 <span style=color:#f92672>=</span> cdnUrl.<span style=color:#a6e22e>replaceAll</span>(<span style=color:#e6db74>&#34;\\[&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>                                        .<span style=color:#a6e22e>replaceAll</span>(<span style=color:#e6db74>&#34;]&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>                                        .<span style=color:#a6e22e>replaceAll</span>(<span style=color:#e6db74>&#34;\\{&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>                                        .<span style=color:#a6e22e>replaceAll</span>(<span style=color:#e6db74>&#34;}&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>                                        .<span style=color:#a6e22e>replaceAll</span>(<span style=color:#e6db74>&#34;&#39;&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>                                        .<span style=color:#a6e22e>replaceAll</span>(<span style=color:#e6db74>&#34;\&#34;&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>                                String<span style=color:#f92672>[]</span> split2 <span style=color:#f92672>=</span> s1.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#34;,&#34;</span>);
</span></span><span style=display:flex><span>                                <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> 0; j <span style=color:#f92672>&lt;</span> split2.<span style=color:#a6e22e>length</span>; j<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>                                    <span style=color:#66d9ef>if</span> (split2<span style=color:#f92672>[</span>j<span style=color:#f92672>]</span>.<span style=color:#a6e22e>contains</span>(<span style=color:#e6db74>&#34;cdn_url&#34;</span>)) {
</span></span><span style=display:flex><span>                                        String<span style=color:#f92672>[]</span> split3 <span style=color:#f92672>=</span> split2<span style=color:#f92672>[</span>j<span style=color:#f92672>]</span>.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#34;cdn_url:&#34;</span>);
</span></span><span style=display:flex><span>                                        result.<span style=color:#a6e22e>add</span>(split3<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>);
</span></span><span style=display:flex><span>                                    }
</span></span><span style=display:flex><span>                                }
</span></span><span style=display:flex><span>                            }
</span></span><span style=display:flex><span>                        }
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span></code></pre></div><p>å…¶å®æ¢ä¸ªæ–¹æ³•ï¼Œä¸€å¥è¯å°±å¯ä»¥æå–æ‰€æœ‰å›¾ç‰‡åœ°å€äº†, ä½¿ç”¨selectæ–¹æ³•ï¼Œæ ‡ç­¾+å±æ€§å³å¯ã€‚</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407250902466.png alt=image-20240725090232398></p><p>é‚£ä¹ˆæ‹¿åˆ°å›¾ç‰‡åœ°å€ä¹‹åï¼Œä½¿ç”¨hutoolè¿›è¡ŒäºŒç»´ç è¯†åˆ«ï¼ŒæŠ¥é”™äº†å°±å¿½ç•¥å¼‚å¸¸ï¼Œæœ‰äºŒç»´ç çš„èƒ½æˆåŠŸè§£æï¼Œé‚£ä¹ˆæ­£å¸¸è§£æçš„å°±æ˜¯äºŒç»´ç åœ°å€äº†ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>hutoolOcr</span>(String imageUrl) <span style=color:#66d9ef>throws</span> IOException, URISyntaxException {
</span></span><span style=display:flex><span>        String finalUrl <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>;
</span></span><span style=display:flex><span>        File file <span style=color:#f92672>=</span> HttpUtil.<span style=color:#a6e22e>downloadFileFromUrl</span>(imageUrl, <span style=color:#e6db74>&#34;static/&#34;</span> <span style=color:#f92672>+</span> COUNT.<span style=color:#a6e22e>getAndIncrement</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.png&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            finalUrl <span style=color:#f92672>=</span> QrCodeUtil.<span style=color:#a6e22e>decode</span>(file);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (Exception e) {
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> finalUrl;
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>è¿™æ ·å°±æ‹¿åˆ°æ¯æœŸç²¾é€‰çš„æ‰€æœ‰çš„æ¨èä¸“æ åˆ—è¡¨äº†</p><h2 id=å¦‚ä½•è·å–ä¸“æ çš„è¯¦æƒ…>å¦‚ä½•è·å–ä¸“æ çš„è¯¦æƒ…<a hidden class=anchor aria-hidden=true href=#å¦‚ä½•è·å–ä¸“æ çš„è¯¦æƒ…>#</a></h2><p>é‚£ä¹ˆæ‹¿åˆ°ä¸“æ åœ°å€ä¹‹åï¼Œå°±æ˜¯å»å¤„ç†ä¸“æ äº†ï¼Œæˆ‘ä»¬ä¸Šä¸€æ­¥æ‹¿åˆ°çš„åªæ˜¯ä¸“æ çš„åœ°å€ï¼Œä¸“æ æ ‡é¢˜ã€ä½œè€…ã€ä¸“æ å¤´åƒã€ä¸“æ ä»‹ç»ã€ä¸“æ çš„å·²è´­æ•°ã€æ–‡ç« æ•°ï¼Œéƒ½éœ€è¦ä»ä¸“æ é‡Œè·å–ã€‚</p><p>æ‰“å¼€æ§åˆ¶å°ï¼Œè¿™å‡ ä¸ªæ¥å£æŠŠæ‰€æœ‰çš„æ•°æ®éƒ½è¿”å›äº†ï¼Œä¸”è¿”å›çš„æ˜¯jsonæ•°æ®ï¼Œæ‰€ä»¥çœ‹ç€å¾ˆç¾å¥½ã€‚</p><p>ä½†æ˜¯è¿™å‡ ä¸ªæ¥å£éƒ½æ˜¯è¦ç­¾åçš„ï¼Œæ•´ä¸ªé¡µé¢æ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œæ— æ³•ä½¿ç”¨jsoupè¿›è¡Œè§£æã€‚è€Œä¸”ä¹Ÿä¸çŸ¥é“ç­¾åè§„åˆ™ï¼Œæ‰€ä»¥è¿™æ¡è·¯è¡Œä¸é€šã€‚</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407250910028.png alt=image-20240725091033955></p><p>åæ¥ç»è¿‡ä¸€ç•ªæœç´¢ï¼Œå¯ä»¥ä½¿ç”¨seleniumæ¨¡æ‹Ÿæµè§ˆå™¨ï¼Œç­‰å¾…é¡µé¢å¼‚æ­¥åŠ è½½å®Œæˆï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨jsoupè§£æé¡µé¢äº†ã€‚</p><p>ä½¿ç”¨seleniuméœ€è¦åœ¨ä¸‹è½½chromeé©±åŠ¨åˆ°æœ¬åœ°ï¼Œchromeé©±åŠ¨éœ€è¦å’Œè‡ªå·±çš„chromeæµè§ˆå™¨ç‰ˆæœ¬ç›¸ç­‰æˆ–ç›¸è¿‘ï¼Œç‰ˆæœ¬ä¸è¦å·®å¤ªå¤šã€‚</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407250919847.png alt=image-20240725091920785></p><p>114ä¹‹å‰çš„ç‰ˆæœ¬åœ¨https://chromedriver.storage.googleapis.com/index.htmlä¸‹è½½</p><p>127ä¹‹åçš„ç‰ˆæœ¬åœ¨https://googlechromelabs.github.io/chrome-for-testing/ä¸‹è½½</p><p>115-126çš„æš‚æ—¶æ²¡æ‰¾åˆ°ï¼Œéšç€æ—¶é—´æ¨ç§»ï¼Œè¿™ä¸ªæœ€æ–°çš„ç‰ˆæœ¬ä¹Ÿå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–</p><p>è®°å¾—æ˜¯ä¸‹è½½chromedriver</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/thend03/mdPic/picGo/202407251050362.png alt=image-20240725105043283></p><p>æ‹¿åˆ°driverä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ä»£ç æ¨¡æ‹Ÿæµè§ˆå™¨çš„é¡µé¢å¼‚æ­¥åŠ è½½è¿‡ç¨‹ï¼Œå¾—åˆ°å®Œæ•´çš„é¡µé¢äº†ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨jsoupè§£æé¡µé¢å…ƒç´ </p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getArticleFullPage</span>(String url) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è®¾ç½® ChromeDriver è·¯å¾„</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>setProperty</span>(<span style=color:#e6db74>&#34;webdriver.chrome.driver&#34;</span>, Constants.<span style=color:#a6e22e>LOCAL_CHROME_DRIVER_PATH</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è®¾ç½® Chrome é€‰é¡¹</span>
</span></span><span style=display:flex><span>        ChromeOptions options <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ChromeOptions();
</span></span><span style=display:flex><span>        options.<span style=color:#a6e22e>addArguments</span>(<span style=color:#e6db74>&#34;--headless&#34;</span>); <span style=color:#75715e>// æ— å¤´æ¨¡å¼</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// å¯åŠ¨ Chrome æµè§ˆå™¨</span>
</span></span><span style=display:flex><span>        WebDriver driver <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ChromeDriver(options);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è®¿é—®ç›®æ ‡ç½‘é¡µ</span>
</span></span><span style=display:flex><span>        driver.<span style=color:#a6e22e>get</span>(url);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String pageContent <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ç­‰å¾…ç½‘é¡µåŠ è½½å®Œæˆï¼ˆæ ¹æ®éœ€è¦è°ƒæ•´ç­‰å¾…æ—¶é—´ï¼‰</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            Thread.<span style=color:#a6e22e>sleep</span>(2000);
</span></span><span style=display:flex><span>            <span style=color:#75715e>// è·å–ç½‘é¡µå†…å®¹</span>
</span></span><span style=display:flex><span>            pageContent <span style=color:#f92672>=</span> driver.<span style=color:#a6e22e>getPageSource</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// æ‰“å°ç½‘é¡µå†…å®¹</span>
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(pageContent);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (InterruptedException e) {
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>            driver.<span style=color:#a6e22e>quit</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> pageContent;
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>æ•´ä½“è§£ææ–‡ç« è¯¦æƒ…çš„æ–¹æ³•å¦‚ä¸‹</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> ArticleDetail <span style=color:#a6e22e>getArticleDetail</span>(String host, String uniqueId) {
</span></span><span style=display:flex><span>        String url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://&#34;</span> <span style=color:#f92672>+</span> host <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;/p/&#34;</span> <span style=color:#f92672>+</span> uniqueId;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String articleFullPage <span style=color:#f92672>=</span> getArticleFullPage(url);
</span></span><span style=display:flex><span>        Document document <span style=color:#f92672>=</span> Jsoup.<span style=color:#a6e22e>parse</span>(articleFullPage);
</span></span><span style=display:flex><span>        Elements title <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementsByTag</span>(<span style=color:#e6db74>&#34;title&#34;</span>);
</span></span><span style=display:flex><span>        Elements intro <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementsByClass</span>(<span style=color:#e6db74>&#34;intro&#34;</span>);
</span></span><span style=display:flex><span>        Elements description <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementsByClass</span>(<span style=color:#e6db74>&#34;description&#34;</span>);
</span></span><span style=display:flex><span>        Elements posts <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementsByClass</span>(<span style=color:#e6db74>&#34;posts&#34;</span>);
</span></span><span style=display:flex><span>        Elements elementsByClass <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementsByClass</span>(<span style=color:#e6db74>&#34;paper&#34;</span>);
</span></span><span style=display:flex><span>        Elements num <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementsByClass</span>(<span style=color:#e6db74>&#34;num&#34;</span>);
</span></span><span style=display:flex><span>        Elements avatar <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementsByClass</span>(<span style=color:#e6db74>&#34;avatar&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String articleTitle <span style=color:#f92672>=</span> getArticleTitle(title);
</span></span><span style=display:flex><span>        String articleDescription <span style=color:#f92672>=</span> getArticleDescription(description);
</span></span><span style=display:flex><span>        String articleIntro <span style=color:#f92672>=</span> getArticleIntro(intro);
</span></span><span style=display:flex><span>        Map<span style=color:#f92672>&lt;</span>String, Integer<span style=color:#f92672>&gt;</span> articleNum <span style=color:#f92672>=</span> getArticleNum(num);
</span></span><span style=display:flex><span>        String articleAvatar <span style=color:#f92672>=</span> getArticleAvatar(avatar);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        ArticleDetail articleDetail <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArticleDetail();
</span></span><span style=display:flex><span>        articleDetail.<span style=color:#a6e22e>setAvatarBase64</span>(articleAvatar);
</span></span><span style=display:flex><span><span style=color:#75715e>//        articleDetail.setGmtCreate(createdAt);</span>
</span></span><span style=display:flex><span>        articleDetail.<span style=color:#a6e22e>setIntroduction</span>(articleIntro);
</span></span><span style=display:flex><span><span style=color:#75715e>//        articleDetail.setFreePostCount(freePostCount);</span>
</span></span><span style=display:flex><span>        articleDetail.<span style=color:#a6e22e>setPostCount</span>(articleNum.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;post&#34;</span>));
</span></span><span style=display:flex><span>        articleDetail.<span style=color:#a6e22e>setTitle</span>(articleTitle);
</span></span><span style=display:flex><span>        articleDetail.<span style=color:#a6e22e>setSubscriberCount</span>(articleNum.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;reader&#34;</span>));
</span></span><span style=display:flex><span>        articleDetail.<span style=color:#a6e22e>setUrl</span>(url);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(1);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> articleDetail;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getHost</span>(String articleUrl) <span style=color:#66d9ef>throws</span> MalformedURLException {
</span></span><span style=display:flex><span>        java.<span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>URL</span> url <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> URL(articleUrl);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> url.<span style=color:#a6e22e>getHost</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getArticleUniqueId</span>(String articleUrl) <span style=color:#66d9ef>throws</span> MalformedURLException {
</span></span><span style=display:flex><span>        java.<span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>URL</span> url <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> URL(articleUrl);
</span></span><span style=display:flex><span>        String path <span style=color:#f92672>=</span> url.<span style=color:#a6e22e>getPath</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> path.<span style=color:#a6e22e>replaceAll</span>(<span style=color:#e6db74>&#34;/p/&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getArticleFullPage</span>(String url) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è®¾ç½® ChromeDriver è·¯å¾„</span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>setProperty</span>(<span style=color:#e6db74>&#34;webdriver.chrome.driver&#34;</span>, Constants.<span style=color:#a6e22e>LOCAL_CHROME_DRIVER_PATH</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è®¾ç½® Chrome é€‰é¡¹</span>
</span></span><span style=display:flex><span>        ChromeOptions options <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ChromeOptions();
</span></span><span style=display:flex><span>        options.<span style=color:#a6e22e>addArguments</span>(<span style=color:#e6db74>&#34;--headless&#34;</span>); <span style=color:#75715e>// æ— å¤´æ¨¡å¼</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// å¯åŠ¨ Chrome æµè§ˆå™¨</span>
</span></span><span style=display:flex><span>        WebDriver driver <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ChromeDriver(options);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è®¿é—®ç›®æ ‡ç½‘é¡µ</span>
</span></span><span style=display:flex><span>        driver.<span style=color:#a6e22e>get</span>(url);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String pageContent <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ç­‰å¾…ç½‘é¡µåŠ è½½å®Œæˆï¼ˆæ ¹æ®éœ€è¦è°ƒæ•´ç­‰å¾…æ—¶é—´ï¼‰</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            Thread.<span style=color:#a6e22e>sleep</span>(2000);
</span></span><span style=display:flex><span>            <span style=color:#75715e>// è·å–ç½‘é¡µå†…å®¹</span>
</span></span><span style=display:flex><span>            pageContent <span style=color:#f92672>=</span> driver.<span style=color:#a6e22e>getPageSource</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// æ‰“å°ç½‘é¡µå†…å®¹</span>
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(pageContent);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (InterruptedException e) {
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>finally</span> {
</span></span><span style=display:flex><span>            driver.<span style=color:#a6e22e>quit</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> pageContent;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * ä¸“æ çš„æ ‡é¢˜
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param title title element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return title
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getArticleTitle</span>(Elements title) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (Objects.<span style=color:#a6e22e>isNull</span>(title)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (title.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Element element : title) {
</span></span><span style=display:flex><span>            List<span style=color:#f92672>&lt;</span>Node<span style=color:#f92672>&gt;</span> nodes <span style=color:#f92672>=</span> element.<span style=color:#a6e22e>childNodes</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (CollectionUtils.<span style=color:#a6e22e>isEmpty</span>(nodes)) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> collect <span style=color:#f92672>=</span> nodes.<span style=color:#a6e22e>stream</span>().<span style=color:#a6e22e>filter</span>(Objects::nonNull).<span style=color:#a6e22e>map</span>(node <span style=color:#f92672>-&gt;</span> {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (node <span style=color:#66d9ef>instanceof</span> TextNode) {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> ((TextNode) node).<span style=color:#a6e22e>text</span>();
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>            }).<span style=color:#a6e22e>collect</span>(Collectors.<span style=color:#a6e22e>toList</span>());
</span></span><span style=display:flex><span>            result.<span style=color:#a6e22e>addAll</span>(collect);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> StringUtils.<span style=color:#a6e22e>join</span>(result, <span style=color:#e6db74>&#34;,&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getArticleDescription</span>(Elements description) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (Objects.<span style=color:#a6e22e>isNull</span>(description)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (description.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        Iterator<span style=color:#f92672>&lt;</span>Element<span style=color:#f92672>&gt;</span> iterator <span style=color:#f92672>=</span> description.<span style=color:#a6e22e>iterator</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (iterator.<span style=color:#a6e22e>hasNext</span>()) {
</span></span><span style=display:flex><span>            Element next <span style=color:#f92672>=</span> iterator.<span style=color:#a6e22e>next</span>();
</span></span><span style=display:flex><span>            List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> list <span style=color:#f92672>=</span> parseNode(next);
</span></span><span style=display:flex><span>            result.<span style=color:#a6e22e>add</span>(StringUtils.<span style=color:#a6e22e>join</span>(list, <span style=color:#e6db74>&#34;&#34;</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        String join <span style=color:#f92672>=</span> StringUtils.<span style=color:#a6e22e>join</span>(result, <span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> join.<span style=color:#a6e22e>replaceAll</span>(<span style=color:#e6db74>&#34;&lt;p&gt;&lt;/p&gt;&#34;</span>, <span style=color:#e6db74>&#34;\r\n\n&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getArticleIntro</span>(Elements intro) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (Objects.<span style=color:#a6e22e>isNull</span>(intro)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (intro.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Element next : intro) {
</span></span><span style=display:flex><span>            List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> list <span style=color:#f92672>=</span> parseNode(next);
</span></span><span style=display:flex><span>            result.<span style=color:#a6e22e>add</span>(StringUtils.<span style=color:#a6e22e>join</span>(list, <span style=color:#e6db74>&#34;&#34;</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        String join <span style=color:#f92672>=</span> StringUtils.<span style=color:#a6e22e>join</span>(result, <span style=color:#e6db74>&#34;&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> join.<span style=color:#a6e22e>replaceAll</span>(<span style=color:#e6db74>&#34;&lt;br&gt;&#34;</span>, <span style=color:#e6db74>&#34;\r\n&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Map<span style=color:#f92672>&lt;</span>String, Integer<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getArticleNum</span>(Elements num) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (Objects.<span style=color:#a6e22e>isNull</span>(num)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Collections.<span style=color:#a6e22e>emptyMap</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (num.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Collections.<span style=color:#a6e22e>emptyMap</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        Element reader <span style=color:#f92672>=</span> num.<span style=color:#a6e22e>get</span>(0);
</span></span><span style=display:flex><span>        Element post <span style=color:#f92672>=</span> num.<span style=color:#a6e22e>get</span>(1);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        TextNode node <span style=color:#f92672>=</span> (TextNode) reader.<span style=color:#a6e22e>childNodes</span>().<span style=color:#a6e22e>get</span>(0);
</span></span><span style=display:flex><span>        String text <span style=color:#f92672>=</span> node.<span style=color:#a6e22e>text</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        TextNode postNode <span style=color:#f92672>=</span> (TextNode) post.<span style=color:#a6e22e>childNodes</span>().<span style=color:#a6e22e>get</span>(0);
</span></span><span style=display:flex><span>        String text1 <span style=color:#f92672>=</span> postNode.<span style=color:#a6e22e>text</span>();
</span></span><span style=display:flex><span>        Map<span style=color:#f92672>&lt;</span>String, Integer<span style=color:#f92672>&gt;</span> map <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashMap<span style=color:#f92672>&lt;&gt;</span>(4);
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;reader&#34;</span>, Integer.<span style=color:#a6e22e>parseInt</span>(text));
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;post&#34;</span>, Integer.<span style=color:#a6e22e>parseInt</span>(text1));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> map;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getArticleAvatar</span>(Elements avatar) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (Objects.<span style=color:#a6e22e>isNull</span>(avatar)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (avatar.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        Element element <span style=color:#f92672>=</span> avatar.<span style=color:#a6e22e>get</span>(0);
</span></span><span style=display:flex><span>        String avatarUrl <span style=color:#f92672>=</span> element.<span style=color:#a6e22e>attributes</span>().<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;src&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> bytes <span style=color:#f92672>=</span> HttpUtil.<span style=color:#a6e22e>downloadBytes</span>(avatarUrl);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;data:image/jpeg;base64,&#34;</span> <span style=color:#f92672>+</span> Base64.<span style=color:#a6e22e>getEncoder</span>().<span style=color:#a6e22e>encodeToString</span>(bytes);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * è§£ænodeè¯¦æƒ…ï¼Œéœ€è¦é€’å½’ï¼Œtext node/element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param element element
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return list
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>parseNode</span>(Element element) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (Objects.<span style=color:#a6e22e>isNull</span>(element)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>Node<span style=color:#f92672>&gt;</span> nodes <span style=color:#f92672>=</span> element.<span style=color:#a6e22e>childNodes</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (CollectionUtils.<span style=color:#a6e22e>isEmpty</span>(nodes)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> result <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (Node node : nodes) {
</span></span><span style=display:flex><span>            List<span style=color:#f92672>&lt;</span>Node<span style=color:#f92672>&gt;</span> textNodeList <span style=color:#f92672>=</span> node.<span style=color:#a6e22e>childNodes</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (CollectionUtils.<span style=color:#a6e22e>isEmpty</span>(textNodeList)) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (node <span style=color:#66d9ef>instanceof</span> TextNode) {
</span></span><span style=display:flex><span>                    result.<span style=color:#a6e22e>add</span>(((TextNode) node).<span style=color:#a6e22e>text</span>());
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                    result.<span style=color:#a6e22e>add</span>(node.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> subList <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (Node text : textNodeList) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (Objects.<span style=color:#a6e22e>isNull</span>(text)) {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (text <span style=color:#66d9ef>instanceof</span> TextNode) {
</span></span><span style=display:flex><span>                    subList.<span style=color:#a6e22e>add</span>(((TextNode) text).<span style=color:#a6e22e>text</span>());
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (text <span style=color:#66d9ef>instanceof</span> Element) {
</span></span><span style=display:flex><span>                    List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> list <span style=color:#f92672>=</span> parseNode((Element) text);
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> (CollectionUtils.<span style=color:#a6e22e>isNotEmpty</span>(list)) {
</span></span><span style=display:flex><span>                        subList.<span style=color:#a6e22e>add</span>(StringUtils.<span style=color:#a6e22e>join</span>(list, <span style=color:#e6db74>&#34;&#34;</span>));
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                    subList.<span style=color:#a6e22e>add</span>(text.<span style=color:#a6e22e>toString</span>());
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            result.<span style=color:#a6e22e>add</span>(StringUtils.<span style=color:#a6e22e>join</span>(subList, <span style=color:#e6db74>&#34;&#34;</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> result;
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><h1 id=å‰ç«¯é¡µé¢å±•ç¤º>å‰ç«¯é¡µé¢å±•ç¤º<a hidden class=anchor aria-hidden=true href=#å‰ç«¯é¡µé¢å±•ç¤º>#</a></h1><p>ç”±äºæˆ‘æ˜¯å‰ç«¯åºŸï¼Œæ‰¾äº†ä¸ªå¼€æºçš„å¯¼èˆªé¡¹ç›®å½“æ¨¡æ¿ï¼Œæ‰¾æˆ‘çš„å‰ç«¯æœ‹å‹æ”¹äº†ä¸€ä¸‹ã€‚</p><p>å¼€æºé¡¹ç›®åœ°å€å¦‚ä¸‹: <a href=https://github.com/jic999/moon-web-start>https://github.com/jic999/moon-web-start</a></p><p>ç»è¿‡ä¿®æ”¹çš„å‰ç«¯é¡¹ç›®åœ°å€å¦‚ä¸‹: <a href=https://github.com/gloaming123/moon-web-start>https://github.com/gloaming123/moon-web-start</a></p><p>åç«¯ä»£ç é¡¹ç›®åœ°å€å¦‚ä¸‹: <a href=https://github.com/thend03/xiaobot-spider>https://github.com/thend03/xiaobot-spider</a></p><p>è¿™ä¸ªå¯¼èˆªé¡¹ç›®è‡ªåŠ¨github pageséƒ¨ç½²ï¼Œå¯ä»¥ç›´æ¥åœ¨ä»“åº“çš„actionsç‚¹å‡»è¿è¡Œï¼Œå¯ä»¥åœ¨jobçš„è¿è¡Œæ—¥å¿—é‡Œå¾—åˆ°é¡µé¢è®¿é—®åœ°å€ã€‚</p><p>ä¸ºäº†ä¼˜åŒ–åŠ è½½é€Ÿåº¦ï¼Œæˆ‘è¿™è¾¹ç”Ÿæˆçš„è¯¦æƒ…ï¼Œå°†ä¸“æ çš„å¤´åƒè½¬æˆäº†base64ï¼Œå‰ç«¯å†å°†base64è½¬æˆæœ¬åœ°å›¾ç‰‡ï¼Œä¼˜åŒ–äº†åŠ è½½é€Ÿåº¦ã€‚</p><h1 id=æ€»ç»“>æ€»ç»“<a hidden class=anchor aria-hidden=true href=#æ€»ç»“>#</a></h1><p>é‚£ä¹ˆç»è¿‡ä¸€ç³»åˆ—çš„å‹¾å…‘ï¼Œå°±æ‹¿åˆ°äº†ä¸“æ çš„è¯¦æƒ…ã€‚</p><p>æ€»å¾—æ¥è¯´ï¼Œåç«¯å°±æ˜¯ä½¿ç”¨äº†http+jsoupè§£æäº†é¡µé¢ï¼Œæ²¡æœ‰ä»€ä¹ˆéš¾çš„ã€‚å¯¹apiç†Ÿæ‚‰çš„è¯é€Ÿåº¦ä¼šæ›´å¿«ä¸€ç‚¹ã€‚</p><p>æ²¡æœ‰æ¶‰åŠå¤§è§„æ¨¡çš„çˆ¬è™«ï¼Œç®—æ˜¯ä¸€æ¬¡ç®€å•çš„å°è¯•å§ã€‚</p><p>å¯¹æˆ‘æ¥è¯´éš¾çš„æœç„¶è¿˜æ˜¯å‰ç«¯å‘€ï¼Œéœ€è¦æˆ‘çš„å‰ç«¯åˆä¼™äººæŒç»­å‘åŠ›ï¼Œå®ç°å‰ç«¯é¡µé¢äº†ã€‚</p><p>å‰ç«¯åœ°å€ï¼Œé‚£ä¸ªä¸“å±åˆ†é”€ç éœ€è¦è‡ªå·±æ›¿æ¢ï¼Œç”±äºæˆ‘ä¸æ‡‚å‰ç«¯ï¼Œæ²¡æ³•ç»™å‡ºè¯¦ç»†çš„ä½¿ç”¨è¯´æ˜ï¼Œæˆ‘è‡ªå·±çš„åˆ†é”€ç æ˜¯æˆ‘çš„å‰ç«¯æœ‹å‹å¸®æˆ‘ä¸“é—¨å†™åˆ°ä¸€ä¸ªåˆ†æ”¯é‡Œäº†ã€‚</p><p>å¦å¤–çˆ¬ç²¾é€‰åˆ—è¡¨ï¼Œåªèƒ½æ‹¿åˆ°éƒ¨åˆ†ä¸Šæ¨èçš„ä¸“æ ï¼Œå…¶ä»–ä¸åœ¨æ¨èé‡Œçš„ï¼Œè¦ä¹ˆå»å…¶ä»–çš„å¯¼èˆªç«™çˆ¬ï¼Œè¦ä¹ˆé å…¶ä»–æ•£è½çš„åœ°æ–¹ä¼ æ’­äº†ã€‚</p><p>å°æŠ¥ç«¥çš„ä¸“æ ä»·æ ¼éƒ½ä¸å¤§è´µï¼Œé€‚åˆå½“çŸ¥è¯†ä»˜è´¹çš„å°å†Œæ¥è´­ä¹°ï¼Œæœ‰çš„å¯ä»¥æ¥ç‚¹å¯å‘æˆ‘è§‰å¾—å°±èƒ½å€¼å›ç¥¨ä»·äº†ã€‚</p></div><div class=post-reward><div style=padding:0;margin:0;width:100%;font-size:16px;text-align:center><div id=QR style=opacity:0><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://blog.thend03.com/img/wechat-pay.png alt=wechat_pay></a><p>å¾®ä¿¡</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://blog.thend03.com/img/alipay.png alt=alipay></a><p>æ”¯ä»˜å®</p></div></div><button id=rewardButton onclick='var qr=document.getElementById("QR");qr.style.opacity==="0"?qr.style.opacity="1":qr.style.opacity="0"'>
<span>ğŸ§§ é¼“åŠ±</span></button></div></div><footer class=post-footer><nav class=paginav><a class=next href=https://blog.thend03.com/posts/incorrect-use-of-grep/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>grepä½¿ç”¨ä¸å½“å¼•èµ·çš„æƒ¨æ¡ˆ</span></a></nav></footer></div><style>.comments_details summary::marker{font-size:20px;content:'ğŸ‘‰å±•å¼€è¯„è®º';color:var(--content)}.comments_details[open] summary::marker{font-size:20px;content:'ğŸ‘‡å…³é—­è¯„è®º';color:var(--content)}</style><div><details class=comments_details><summary style="cursor:pointer;margin:50px 0 20px;width:130px"><span style=font-size:20px;color:var(--content)>...</span></summary><div id=tcomment></div></details><script src=https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js></script><script>twikoo.init({envId:null,el:"#tcomment",lang:"zh-CN",region:null,path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><footer class=footer><span>Copyright
&copy;
2020-2024
<a href=https://blog.thend03.com/ style=color:#939393>Fayy&amp;Fc's Blog</a>
All Rights Reserved
</span><a href=https://beian.miit.gov.cn/ target=_blank style=color:#939393></a>&nbsp;
<span><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null" style=display:inline-block;text-decoration:none;height:20px;color:#939393><img src style="float:left;margin:0 5px 0 0">
</a></span><span id=busuanzi_container><span class="fa fa-user"></span> <span id=busuanzi_value_site_uv></span>
<span class="fa fa-eye"></span> <span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
<span id=read_progress></span>
</span></a><script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>200||document.documentElement.scrollTop>200?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{(function(){document.cookie="change-themes="+escape("false")})(),document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.body.addEventListener("copy",function(e){if(window.getSelection().toString()&&window.getSelection().toString().length>50){let t=e.clipboardData||window.clipboardData;if(t){e.preventDefault();let n=window.getSelection().toString(),s=window.getSelection().toString();t.setData("text/html",n),t.setData("text/plain",s)}}})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="å¤åˆ¶";function i(){t.innerText="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerText="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent;navigator.clipboard.writeText(t),i();return}const n=document.createRange();n.selectNodeContents(e);const s=window.getSelection();s.removeAllRanges(),s.addRange(n);try{document.execCommand("copy"),i()}catch{}s.removeRange(n)});let l=e.className.replaceAll("language-",""),n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div");o.innerText=l,n.setAttribute("class","mac-tool"),a.setAttribute("class","mac bb1"),r.setAttribute("class","mac bb2"),c.setAttribute("class","mac bb3"),o.setAttribute("class","language-type"),n.appendChild(a),n.appendChild(r),n.appendChild(c),n.appendChild(o),s.classList.contains("highlight")?(s.appendChild(t),s.appendChild(n)):s.parentNode.firstChild==s||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?(e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t),s.appendChild(n)):(e.parentNode.appendChild(t),s.appendChild(n)))})</script></body></html>